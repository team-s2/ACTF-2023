{"version":3,"file":"app.bundle.js","mappings":"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","sources":["webpack://ctf-game/./node_modules/seedrandom/index.js","webpack://ctf-game/./node_modules/seedrandom/lib/alea.js","webpack://ctf-game/./node_modules/seedrandom/lib/tychei.js","webpack://ctf-game/./node_modules/seedrandom/lib/xor128.js","webpack://ctf-game/./node_modules/seedrandom/lib/xor4096.js","webpack://ctf-game/./node_modules/seedrandom/lib/xorshift7.js","webpack://ctf-game/./node_modules/seedrandom/lib/xorwow.js","webpack://ctf-game/./node_modules/seedrandom/seedrandom.js","webpack://ctf-game/./src/effect/effect.ts","webpack://ctf-game/./src/effect/item.ts","webpack://ctf-game/./src/effect/status.ts","webpack://ctf-game/./src/event/actions.ts","webpack://ctf-game/./src/event/conditions.ts","webpack://ctf-game/./src/event/core.ts","webpack://ctf-game/./src/event/engine.ts","webpack://ctf-game/./src/event/expression.ts","webpack://ctf-game/./src/event/loader.ts","webpack://ctf-game/./src/gameEngine.ts","webpack://ctf-game/./src/gameState.ts","webpack://ctf-game/./src/gui/guiBase.ts","webpack://ctf-game/./src/gui/guiEffectProviderList.ts","webpack://ctf-game/./src/gui/guiFooter.ts","webpack://ctf-game/./src/gui/guiFx.ts","webpack://ctf-game/./src/gui/guiGame.ts","webpack://ctf-game/./src/gui/guiMessageWindow.ts","webpack://ctf-game/./src/gui/guiModalBox.ts","webpack://ctf-game/./src/gui/guiStatsBar.ts","webpack://ctf-game/./src/gui/textEngine.ts","webpack://ctf-game/./src/i18n/localization.ts","webpack://ctf-game/./src/tracer.ts","webpack://ctf-game/./src/utils/collection.ts","webpack://ctf-game/./src/utils/expression.ts","webpack://ctf-game/./src/utils/network.ts","webpack://ctf-game/./src/utils/priorityQueue.ts","webpack://ctf-game/./src/utils/random.ts","webpack://ctf-game/./node_modules/decode-uri-component/index.js","webpack://ctf-game/./node_modules/filter-obj/index.js","webpack://ctf-game/./node_modules/js-yaml/dist/js-yaml.mjs","webpack://ctf-game/./node_modules/query-string/base.js","webpack://ctf-game/./node_modules/query-string/index.js","webpack://ctf-game/./node_modules/split-on-first/index.js","webpack://ctf-game/webpack/bootstrap","webpack://ctf-game/webpack/runtime/amd define","webpack://ctf-game/webpack/runtime/amd options","webpack://ctf-game/webpack/runtime/compat get default export","webpack://ctf-game/webpack/runtime/define property getters","webpack://ctf-game/webpack/runtime/hasOwnProperty shorthand","webpack://ctf-game/webpack/runtime/make namespace object","webpack://ctf-game/webpack/runtime/node module decorator","webpack://ctf-game/./src/app.ts"],"sourcesContent":["// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","import { Item } from \"./item\";\nimport { SimpleRegistry } from \"../utils/simpleRegistry\";\n\nexport interface Modifier {\n    readonly relative: boolean;\n    readonly amount: number;\n}\n\nexport type EffectCollection = { [effectId: string]: Modifier; };\n\n/**\n * Loads a effect collection.\n * @param obj Schema:\n *  ```\n *  {\n *      string: {\n *          \"relative\": boolean\n *          \"amount\": number\n *      }\n *  }\n *  ```\n */\nexport function loadEffectCollectionFromJSON(obj: any): EffectCollection {\n    let result: EffectCollection = {};\n    for (const key in obj) {\n        if (obj[key]) {\n            if (result[key]) {\n                throw new Error(`Duplicate definition for \"${key}\".`);\n            }\n            if (typeof(obj[key]['relative']) !== 'boolean') {\n                throw new Error('Missing relative/absolute definition.');\n            }\n            if (typeof(obj[key]['amount']) !== 'number') {\n                throw new Error('Missing amount.');\n            }\n            result[key] = {\n                relative: obj[key]['relative'],\n                amount: obj[key]['amount']\n            };\n        }\n    }\n    return result;\n}\n\n/**\n * An effect provider can be an item, or a player status.\n */\nexport interface EffectProvider {\n    /**\n     * Unique identifier for this effect provider.\n     */\n    readonly id: string;\n    /**\n     * Retrieves the collection of effects.\n     */\n    getEffects(): EffectCollection;\n}\n\n/**\n * Registry for effect providers. Used to retrieve effect provider instances\n * by their id.\n */\nexport class EffectProviderRegistry<T extends EffectProvider> implements SimpleRegistry<T> {\n\n    protected _registry: Map<string, T> = new Map();\n\n    add(item: T): void {\n        const existingItem = this._registry.get(item.id);\n        if (existingItem != undefined && existingItem !== item) {\n            throw new Error('Cannot register two different items under the same id.');\n        }\n        this._registry.set(item.id, item);\n    }\n\n    has(item: T | string): boolean {\n        if (typeof item === 'string') {\n            return this._registry.has(item);\n        } else {\n            return this._registry.get(item.id) === item;\n        }\n    }\n\n    get(id: string): T {\n        const existingItem = this._registry.get(id);\n        if (existingItem == undefined) {\n            throw new Error(`Id \"${id}\" does not exist.`);\n        }\n        return existingItem;\n    }\n\n    forEach(callback: (item: T) => void): void {\n        for (let item of this._registry.values()) {\n            callback(item);\n        }\n    }\n\n}\n\nexport class EffectProviderCollectionChangedEvent<T extends EffectProvider> {\n    // Indicates whether this is a clear event.\n    clear: boolean;\n    item: T | undefined;\n    oldCount: number;\n    newCount: number;\n\n    constructor(clear: boolean, item: T | undefined, oldCount: number, newCount: number) {\n        this.clear = clear;\n        this.item = item;\n        this.oldCount = oldCount;\n        this.newCount = newCount;\n    }\n}\n\n/**\n * An effect provider collection can be a player's inventory or status\n * collection. Each effect provider can have different amounts.\n */\nexport class EffectProviderCollection<T extends EffectProvider> {\n\n    protected _items: { [id: string]: [T, number]; } = {};\n    protected _registry: EffectProviderRegistry<T>;\n\n    constructor(registry: EffectProviderRegistry<T>) {\n        this._registry = registry;\n    }\n\n    onChanged?: (sender: EffectProviderCollection<T>, event: EffectProviderCollectionChangedEvent<T>) => void;\n\n    /**\n     * Determines the maximum number of the effect providers of the same type\n     * (same id).\n     */\n    get maxStackSize(): number {\n        return Infinity;\n    }\n\n    /**\n     * Gets a readonly view of all the effect providers.\n     */\n    get items(): { readonly [id: string]: Readonly<[T, number]>; } {\n        return this._items;\n    }\n\n    /**\n     * Adds a new effect provider.\n     * @param item\n     * @param count\n     */\n    add(item: T | string, count: number = 1): void {\n        if (typeof item === 'string') item = this._registry.get(item);\n        if (count < 0 || Math.floor(count) !== count) throw new Error('Count must be a positive integer.');\n        if (this._items[item.id] == undefined) {\n            this._items[item.id] = [item, count];\n            this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, 0, count));\n        } else {\n            let oldCount = this._items[item.id][1];\n            this._items[item.id][1] += count;\n            if (this._items[item.id][1] > this.maxStackSize) {\n                this._items[item.id][1] = this.maxStackSize;                \n            }\n            this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, this._items[item.id][1], oldCount));\n        }\n    }\n\n    /**\n     * Removes an effect provider.\n     * @param item \n     * @param count \n     */\n    remove(item: T | string, count: number = 1): void {\n        if (typeof item === 'string') item = this._registry.get(item);\n        if (count < 0 || Math.floor(count) !== count) throw new Error('Count must be a positive integer.');\n        if (this._items[item.id] == undefined) return;\n        let oldCount = this._items[item.id][1];\n        this._items[item.id][1] -= count;\n        if (this._items[item.id][1] <= 0) {\n            delete this._items[item.id];\n            this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, 0, oldCount));\n        } else {\n            this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, this._items[item.id][1], oldCount));\n        }\n    }\n\n    clear(): void {\n        this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent<T>(true, undefined, 0, 0));\n        this._items = {};\n    }\n\n    count(item: T | string): number {\n        if (typeof item === 'string') {\n            item = this._registry.get(item);\n        }\n        return this._items[item.id] ? this.items[item.id][1] : 0;\n    }\n\n    /**\n     * Calculates the combined effect value by considering all the effect\n     * providers in this collection. For instance, if three effect providers in\n     * this collection have effects\n     * {'player.hopeBoost', false, 1.0},\n     * {'player.hopeBoost', true, 0.2} \n     * {'player.hopeBoost', false, 1.5}, respectively,\n     * then this function will return [2.5, 0.2] for the input\n     * 'player.hopeBoost'.\n     * Equation for calculating the values\n     *  a = sum of absolute modifier values\n     *  m = multiplication of (1.0 + amounts) for relative values\n     * Returns [a, m]\n     * @param effectId Id of the effect.\n     */\n    calcCombinedEffectValue(effectId: string): [number, number] {\n        let a = 0;\n        let m = 1;\n        for (let id in this._items) {\n            let curItem = this._items[id];\n            let curEffects = curItem[0].getEffects();\n            if (effectId in curEffects) {\n                let modifier = curEffects[effectId];\n                if (modifier.relative) {\n                    m += Math.pow(modifier.amount + 1, curItem[1]);\n                } else {\n                    a += modifier.amount * curItem[1];\n                }\n            }\n        }\n        return [a, m];\n    }\n\n    protected dispatchChangeEvent(event: EffectProviderCollectionChangedEvent<T>): void {\n        if (this.onChanged) {\n            this.onChanged(this, event);\n        }\n    }\n\n}\n","import { EffectProvider, EffectProviderCollection, Modifier, EffectProviderRegistry, EffectCollection, loadEffectCollectionFromJSON } from './effect';\nimport { downloadAndParse } from '../utils/network';\nimport { load as loadYaml } from 'js-yaml';\n\nexport class Item implements EffectProvider {\n\n    constructor(private _id: string, private _rarity: number,\n                private _icon: string = '',\n                private _effects: EffectCollection = {})\n    {\n\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get unlocalizedName(): string {\n        return 'item.' + this.id;\n    }\n\n    get unlocalizedDescription(): string {\n        return this.unlocalizedName + '.description';\n    }\n\n    get rarity(): number {\n        return this._rarity;\n    }\n\n    get icon(): string {\n        return this._icon;\n    }\n\n    getEffects(): EffectCollection {\n        return this._effects;\n    }\n\n}\n\nexport class ItemRegistry extends EffectProviderRegistry<Item> {\n\n    async loadItems(url: string): Promise<void> {\n        let obj: any = await downloadAndParse(url, loadYaml);\n        if (!obj) return;\n        if (!Array.isArray(obj['items'])) {\n            throw new Error('Expecting an array of item definitions.');\n        }\n        let itemDefs: any[] = obj['items'];\n        for (let itemDef of itemDefs) {\n            if (typeof itemDef['id'] !== 'string') {\n                throw new Error('Missing item id.');\n            }\n            let effects: EffectCollection;\n            if (itemDef['effects'] != undefined) {\n                effects = loadEffectCollectionFromJSON(itemDef['effects']);\n            } else {\n                effects = {};\n            }\n            let rarity = typeof itemDef['rarity'] === 'number' ? itemDef['rarity'] : 0;\n            let icon = typeof itemDef['icon'] === 'string' ? itemDef['icon'] : '';\n            this.add(new Item(itemDef['id'], rarity, icon, effects));\n        }\n        console.log(`Successfully registered ${itemDefs.length} items.`);\n    }\n\n}\n\nexport class Inventory extends EffectProviderCollection<Item> {\n    \n}\n","import { EffectProvider, EffectCollection, EffectProviderCollection, EffectProviderRegistry, loadEffectCollectionFromJSON, EffectProviderCollectionChangedEvent } from './effect';\nimport { load as loadYaml } from 'js-yaml';\nimport { downloadAndParse } from '../utils/network';\n\nexport class Status implements EffectProvider {\n\n    constructor (private _id: string, private _duration: number,\n                 private _icon: string = '',\n                 private _effects: EffectCollection = {})\n    {\n\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get unlocalizedName(): string {\n        return 'status.' + this.id;\n    }\n\n    get unlocalizedDescription(): string {\n        return this.unlocalizedName + '.description';\n    }\n\n    get icon(): string {\n        return this._icon;\n    }\n\n    get duration(): number {\n        return this._duration;\n    }\n\n    getEffects(): EffectCollection {\n        return this._effects;\n    }\n\n}\n\nexport class StatusRegistry extends EffectProviderRegistry<Status> {\n    \n    async loadStatus(url: string): Promise<void> {\n        let obj: any = await downloadAndParse(url, loadYaml);\n        if (!obj) return;\n        if (!Array.isArray(obj['status'])) {\n            throw new Error('Expecting an array of status definitions.');\n        }\n        let statusDefs: any[] = obj['status'];\n        for (let statusDef of statusDefs) {\n            if (typeof statusDef['id'] !== 'string') {\n                throw new Error('Missing item id.');\n            }\n            let effects: EffectCollection;\n            if (statusDef['effects'] != undefined) {\n                effects = loadEffectCollectionFromJSON(statusDef['effects']);\n            } else {\n                effects = {};\n            }\n            let duration = typeof statusDef['duration'] === 'number' ? statusDef['duration'] : Infinity;\n            let icon = typeof statusDef['icon'] === 'string' ? statusDef['icon'] : '';\n            this.add(new Status(statusDef['id'], duration, icon, effects));\n        }\n        console.log(`Successfully registered ${statusDefs.length} status.`);\n    }\n\n}\n\nexport class StatusTable extends EffectProviderCollection<Status> {\n    \n    // Note: count is always one for the moment. If we want different levels of\n    // status, we may utilize the count value in the future.\n\n    private _remainingTicks: { [key: string]: number } = {};\n\n    /**\n     * Adds a new status.\n     * @param item\n     * @param count Ignored.\n     */\n    add(item: Status | string, count: number = 1): void {\n        if (typeof item === 'string') item = this._registry.get(item);\n        if (count !== 1) throw new Error('Count must be one.');\n        if (this._items[item.id] == undefined) {\n            this._items[item.id] = [item, 1];\n            this._remainingTicks[item.id] = item.duration;\n            this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, 0, 1));\n        }\n        // Reset duration\n        this._remainingTicks[item.id] = item.duration;\n    }\n\n    /**\n     * Removes an effect provider.\n     * @param item \n     * @param count Ignored.\n     */\n    remove(item: Status | string, count: number = 1): void {\n        if (typeof item === 'string') item = this._registry.get(item);\n        if (count !== 1) throw new Error('Count must be one.');\n        if (this._items[item.id] == undefined) return;\n        delete this._items[item.id];\n        delete this._remainingTicks[item.id];\n        this.dispatchChangeEvent(new EffectProviderCollectionChangedEvent(false, item, 0, 1));\n    }\n\n    clear(): void {\n        super.clear();\n        this._remainingTicks = {};        \n    }\n\n    /**\n     * Reduces the remaining ticks of all status by one.\n     */\n    tick(): void {\n        let pending: string[] = [];\n        for (let id in this._remainingTicks) {\n            --this._remainingTicks[id];\n            if (this._remainingTicks[id] === 0) {\n                pending.push(id);\n            }\n        }\n        for (let id of pending) {\n            this.remove(id);\n        }\n    }\n\n}\n","import { EndGameState } from '../gameState';\nimport { EventAction, EventActionExecutionContext, EventCondition } from './core';\nimport { CompiledEventExpression, EventExpressionCompiler } from './expression';\nimport { weightedSample } from '../utils/random';\nimport { ECExpression, EventConditionFactory } from './conditions';\nimport { SetBuilder } from '../utils/collection';\n\n// Note on the usage of typeof.\n// For JSON-like objects, it is safe to check the types of numbers/strings using\n// typeof. We forbid `Number(123)` or `String('abc')`.\n// Object.prototype.toString.call() is a more foolproof approach.\n\ninterface EventActionDeserializationContext {\n    readonly actionFactory: EventActionFactory;\n    readonly conditionFactory: EventConditionFactory;\n    readonly expressionCompiler: EventExpressionCompiler;\n}\n\nexport type EventActionDeserializer =\n    (obj: any, context: EventActionDeserializationContext) => EventAction;\n\nexport interface EventActionDeserializerDefinition {\n    readonly ID: string;\n    readonly fromJSONObject: EventActionDeserializer;\n}\n\n/**\n * A factory class for creating event action instances from JSON-like objects.\n */\nexport class EventActionFactory {\n\n    private _deserializers: Map<string, EventActionDeserializer> = new Map();\n    private _deserializationContext: EventActionDeserializationContext;\n\n    constructor(conditionFactory: EventConditionFactory,\n                expressionCompiler: EventExpressionCompiler) {\n        this._deserializationContext = {\n            actionFactory: this,\n            conditionFactory: conditionFactory,\n            expressionCompiler: expressionCompiler\n        };\n    }\n\n    registerDeserializer(def: EventActionDeserializerDefinition): void {\n        this._deserializers.set(def.ID, def.fromJSONObject);\n    }\n\n    fromJSONObject(obj: any): EventAction {\n        if (!obj['id']) {\n            throw new Error('Action id is not specified.');\n        }\n        const id = obj['id'];\n        if (typeof id !== 'string') {\n            throw new Error('Action id must be a string.');\n        }\n        const deserializer = this._deserializers.get(id);\n        if (deserializer == undefined) {\n            throw new Error(`No deserializer defined for \"${id}\".`);\n        }\n        return deserializer(obj, this._deserializationContext);\n    }\n\n    fromJSONArray(arr: any[]): EventAction[] {\n        let actions = new Array<EventAction>(arr.length);\n        for (let i = 0;i < arr.length;i++) {\n            actions[i] = this.fromJSONObject(arr[i]);\n        }\n        return actions;\n    }\n\n}\n\n/**\n * Logs information on the console.\n */\nexport class EALog extends EventAction {\n    \n    constructor(private _message: string, private _dumpGameState: boolean) {\n        super();\n    }\n    \n    static ID = 'Log';\n    \n    /**\n     * Creates an `EALog` instance from its JSON definition stored in the given\n     * JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Log\",\n     *         \"message\": string,\n     *         \"dumpGameState\": boolean | undefined\n     *     }\n     *     ```\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EALog {\n        if (obj['message'] == undefined) throw new Error('Message missing.');\n        return new EALog(obj['message'], obj['dumpGameState'] || false);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        console.log(this._message);\n        if (this._dumpGameState) {\n            context.gameState.dumpToConsole();\n        }\n        context.gameState.tracer.traceAction([EALog.ID, []]);\n    }\n\n}\n\n/**\n * Displays one message.\n */\nexport class EADisplayMessage extends EventAction {\n\n    constructor(private _message: string, private _confirm: string,\n                private _icon: string) {\n        super();\n    }\n\n    static ID = 'DisplayMessage';\n\n    /**\n     * Creates an `EADisplayMessage` instance from its JSON definition stored in\n     * the given JSON object.\n     * @param obj Schema:\n     *  ```\n     *  {\n     *      \"id\": \"DisplayMessage\",\n     *      \"message\": string,\n     *      \"confirm\": string\n     *  }\n     *  ```\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EADisplayMessage {\n        if (obj['message'] == undefined) throw new Error('Message missing.');\n        if (obj['confirm'] == undefined) {\n            throw new Error('Confirm message missing.');\n        }\n        return new EADisplayMessage(obj['message'], obj['confirm'],\n                                    obj['icon'] || '');\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EADisplayMessage.ID, []]);\n        await context.actionProxy.displayMessage(this._message,\n                                                 this._confirm,\n                                                 this._icon);\n    }\n\n    collectTranslationKeys(): Set<string> {\n        return new Set([this._message, this._confirm]);\n    }\n\n}\n\n/**\n * Display a message randomly selected from a list of predefined messages.\n */\nexport class EADisplayRandomMessage extends EventAction {\n\n    constructor(private _messages: string[], private _confirm: string, private _icon: string) {\n        super();\n    }\n\n    static ID = 'DisplayRandomMessage';\n\n    /**\n     * Creates an `EADisplayRandomMessage` instance from its JSON definition\n     * stored in the given JSON object.\n     * @param obj Schema:\n     *  ```\n     *  {\n     *      \"id\": \"DisplayRandomMessage\",\n     *      \"messages\": string[]\n     *      \"confirm\": string\n     *      \"icon\": string | undefined\n     *  }\n     *  ```\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EADisplayRandomMessage {\n        if (!Array.isArray(obj['messages'])) {\n            throw new Error('Messages missing.');\n        }\n        if (typeof obj['confirm'] !== 'string') {\n            throw new Error('Confirm message missing.');\n        }\n        return new EADisplayRandomMessage(obj['messages'], obj['confirm'],\n                                          obj['icon'] || '');\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        const msgRnd = context.gameState.nextRandomNumber();\n        const msgId = Math.floor(msgRnd * this._messages.length);\n        context.gameState.tracer.traceAction([EADisplayRandomMessage.ID, [msgRnd, msgId]]);\n        await context.actionProxy.displayMessage(this._messages[msgId],\n                                                 this._confirm,\n                                                 this._icon);\n    }\n\n    collectTranslationKeys(): Set<string> {\n        let keys = new Set(this._messages);\n        keys.add(this._confirm);\n        return keys;\n    }\n\n}\n\n/**\n * Displays a message along with multiple choices from which players can select.\n * Each choice can also optionally execute a list of actions after being\n * selected.\n */\nexport class EADisplayChoices extends EventAction {\n\n    constructor(private _message: string, private _choiceMessages: string[],\n                private _requirements: CompiledEventExpression[],\n                private _actions: EventAction[][], private _icon: string)\n    {\n        super();\n        if (_choiceMessages.length !== _requirements.length || _choiceMessages.length !== _actions.length) {\n            throw new Error('The number of choices must be equal to the number of requirements/actions.');\n        }\n    }\n\n    static ID = 'DisplayChoices';\n    \n    /**\n     * Creates an `EADisplayChoices` instance from its JSON definition stored in\n     * the given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"DisplayChoices\",\n     *         \"message\": string,\n     *         \"choices\": [\n     *             {\n     *                 \"message\": string,\n     *                 \"requirement\": number | string | undefined,\n     *                 \"actions\": EventAction[] | undefined\n     *             }\n     *         ]\n     *     }\n     *     ```\n     *     The `requirement` is optional and can be an expression.\n     * @param context Used to create nested actions and compile expressions from\n     *     the `requirement` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EADisplayChoices {\n        if (obj['message'] == undefined) throw new Error('Message missing.');\n        if (!Array.isArray(obj['choices'])) throw new Error('Choices are missing.');\n        let choiceMessages: string[] = [];\n        let requirements: CompiledEventExpression[] = [];\n        let actions: EventAction[][] = [];\n        for (let c of obj['choices']) {\n            if (c['message'] == undefined) {\n                throw new Error('Missing message for the current choice.');\n            }\n            choiceMessages.push(c['message']);\n            let curActions = Array.isArray(c['actions'])\n                ? context.actionFactory.fromJSONArray(c['actions'])\n                : [];\n            actions.push(curActions);\n            // requirement\n            if (c['requirement'] != undefined) {\n                requirements.push(\n                    context.expressionCompiler.compile(c['requirement']));\n            } else {\n                requirements.push(context.expressionCompiler.compile('true'));\n            }\n        }\n        return new EADisplayChoices(obj['message'], choiceMessages,\n                                    requirements, actions, obj['icon'] || '');\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        // Build choice array according to requirements.\n        let choices: Array<[string, number]> = [];\n        for (let i = 0;i < this._choiceMessages.length;i++) {\n            if (context.evaluator.eval(this._requirements[i])) {\n                choices.push([this._choiceMessages[i], i]);\n            }\n        }\n        let choiceId = await context.actionProxy.displayChoices(this._message,\n                                                                choices,\n                                                                this._icon);\n        let actions = this._actions[choiceId];\n        context.gameState.tracer.traceAction([EADisplayChoices.ID, [choiceId]]);\n        for (let a of actions) {\n            await a.execute(context);\n        }\n    }\n\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>();\n        builder.add(this._message, this._choiceMessages);\n        for (const actionList of this._actions) {\n            for (const action of actionList) {\n                builder.add(action.collectTranslationKeys());\n            }\n        }\n        return builder.get();\n    }\n\n}\n\n/**\n * Randomly executes one list of actions of a group of action lists according to\n * the given weights.\n */\nexport class EARandom extends EventAction {\n\n    private _actions: EventAction[][];\n    private _weightExprs: CompiledEventExpression[];\n\n    constructor(actions: EventAction[][], weightExprs: CompiledEventExpression[]) {\n        super();\n        if (actions.length !== weightExprs.length) {\n            throw new Error('The number of weights must match the number of actions.');\n        }\n        this._actions = actions;\n        this._weightExprs = weightExprs\n    }\n\n    static ID = 'Random';\n    \n    /**\n     * Creates an `EARandom` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Random\",\n     *         \"groups\": [\n     *             {\n     *                 \"weight\": number | string,\n     *                 \"actions\": EventAction[]\n     *             }\n     *         ]\n     *     }\n     *     ```\n     *     The `weight` field can be an expression.\n     * @param context Used to create nested actions and compile expressions from\n     *     the `weight` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EARandom {\n        if (!Array.isArray(obj['groups'])) {\n            throw new Error('Missing group definitions.');\n        }\n        let weightExprs: CompiledEventExpression[] = [];\n        let actions: EventAction[][] = [];\n        for (let o of obj['groups']) {\n            let weight = o['weight'];\n            if (weight == undefined) {\n                throw new Error('Missing weight definition.');\n            }\n            if (typeof weight !== 'string' && typeof weight !== 'number') {\n                throw new Error('Weight must be a number or an expression.');\n            }\n            if (!Array.isArray(o['actions'])) {\n                throw new Error('Missing actions.');\n            }\n            weightExprs.push(context.expressionCompiler.compile(weight));\n            actions.push(context.actionFactory.fromJSONArray(o['actions']));\n        }\n        return new EARandom(actions, weightExprs);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        let r = context.gameState.nextRandomNumber()\n        let idx = weightedSample(\n            this._weightExprs.map(item => context.evaluator.eval(item)),\n            r);\n        context.gameState.tracer.traceAction([EARandom.ID, [r, idx]]);\n        for (let a of this._actions[idx]) {\n            await a.execute(context);\n        }\n    }\n\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>()\n        for (const actionList of this._actions) {\n            for (const action of actionList) {\n                builder.add(action.collectTranslationKeys());\n            }\n        }\n        return builder.get();\n    }\n\n}\n\n/**\n * Randomly chooses one of the two action lists to execute via a coin flip.\n * This action is a simplified version of `EARandom` when you only need randomly\n * pick from two actions.\n */\nexport class EACoinFlip extends EventAction {\n\n    constructor(private _p: CompiledEventExpression,\n                private _successActions: EventAction[],\n                private _failActions: EventAction[])\n    {\n        super();\n    }\n\n    static ID = 'CoinFlip';\n\n    /**\n     * Creates an `EACoinFlip` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"CoinFlip\",\n     *         \"probability\": number | string,\n     *         \"success\": EventAction[] | undefined,\n     *         \"fail\": EventAction[] | undefined\n     *     }\n     *     ```\n     * @param context Used to create nested actions and compile expressions from\n     *     the `probability` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EACoinFlip {\n        const p = obj['probability'];\n        if (typeof p !== 'string' && typeof p !== 'number') {\n            throw new Error('Probability must be a number of an expression.');\n        }\n        let successActions = Array.isArray(obj['success']) \n            ? context.actionFactory.fromJSONArray(obj['success'])\n            : [];\n        let failActions = Array.isArray(obj['fail'])\n            ? context.actionFactory.fromJSONArray(obj['fail'])\n            : [];\n        return new EACoinFlip(context.expressionCompiler.compile(p),\n                              successActions, failActions);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        let p = context.evaluator.eval(this._p);\n        if (p < 0) p = 0;\n        let coinFlip = context.gameState.nextRandomNumber();\n        context.gameState.tracer.traceAction([EACoinFlip.ID, [coinFlip]]);\n        if (coinFlip < p) {\n            for (let a of this._successActions) {\n                await a.execute(context);\n            }\n        } else {\n            for (let a of this._failActions) {\n                await a.execute(context);\n            }\n        }\n    }\n\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>();\n        for (let action of this._successActions) {\n            builder.add(action.collectTranslationKeys());\n        }\n        for (let action of this._failActions) {\n            builder.add(action.collectTranslationKeys());\n        }\n        return builder.get();\n    }\n\n}\n\n/**\n * Given a list of conditions and their associated action lists, evaluates the\n * conditions in the order they are defined and executes the action list\n * associated with the first condition that evaluates to true.\n * This action is similar to a non-fall-through switch statement in JavaScript.\n */\nexport class EASwitch extends EventAction {\n\n    constructor(private _conditions: EventCondition[],\n                private _actions: EventAction[][]) {\n        super();\n    }\n\n    static ID = 'Switch';\n\n    /**\n     * Creates an `EASwitch` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Switch\",\n     *         \"branches\": [\n     *             {\n     *                 \"condition\": string | number | EventCondition,\n     *                 \"actions\": EventAction[]\n     *             }\n     *         ]\n     *     }\n     *     ```\n     *     Each `condition` can also be an expression.\n     * @param context Used to create nested actions and compile conditions or\n     *     expressions from the `probability` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EASwitch {\n        const branches = obj['branches'];\n        if (!Array.isArray(branches)) {\n            throw new Error('Expecting an array of branches.');\n        }\n        let conditions: EventCondition[] = [];\n        let actions: EventAction[][] = [];\n        for (let branch of branches) {\n            if (branch['condition'] == undefined) {\n                throw new Error('Condition is required.');\n            }\n            let cond = branch['condition'];\n            if (typeof cond === 'string' || typeof cond === 'number') {\n                conditions.push(\n                    new ECExpression(context.expressionCompiler.compile(cond)));\n            } else {\n                conditions.push(context.conditionFactory.fromJSONObject(cond));\n            }\n            if (!Array.isArray(branch['actions'])) {\n                throw new Error('Missing actions.');\n            }\n            actions.push(\n                context.actionFactory.fromJSONArray(branch['actions']));\n        }\n        return new EASwitch(conditions, actions);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        // Check operation\n        context.gameState.tracer.traceAction([EASwitch.ID, []]);\n        for (let i = 0; i < this._conditions.length; i++) {\n            if (this._conditions[i].check(context)) {\n                for (let action of this._actions[i]) {\n                    await action.execute(context);\n                }\n                break;\n            }\n        }\n    }\n\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>();\n        for (const actionList of this._actions) {\n            for (const action of actionList) {\n                builder.add(action.collectTranslationKeys());\n            }\n        }\n        return builder.get();\n    }\n\n}\n\n/**\n * Keeps executing a list of actions until the stop condition is met. Like a\n * loop in JavaScript.\n */\nexport class EALoop extends EventAction {\n\n    constructor(private _stopCondition: EventCondition | null,\n                private _maxIterations: number,\n                private _checkStopConditionAtEnd: boolean,\n                private _actions: EventAction[]) {\n        super();\n    }\n\n    static ID = 'Loop';\n    \n    /**\n     * Creates an `EALoop` instance from its JSON definition stored in the given\n     * JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Loop\",\n     *         \"stopCondition\": number | string | EventCondition | undefined,\n     *         \"maxIterations\": number | undefined,\n     *         \"checkStopConditionAtEnd\": boolean | undefined,\n     *         \"actions\": EventAction[]\n     *     }\n     *     ```\n     *     If `stopCondition` is not set, there will no stop condition and the\n     *     loop will keep going until `maxIterations` is reached.\n     *     `maxIterations` limits the maximum number of times the loop can run,\n     *     regardless of the `stopCondition`. If `maxIterations` is not set, or\n     *     not set to a positive value, there will be no limit.\n     *     If `checkStopConditionAtEnd` is true, `actions` will be executed\n     *     first before evaluating the stop condition (like a do ... while\n     *     loop). If the stop condition is met, next iteration will not occur.\n     *     Otherwise, the stop condition will be evaluated before executing\n     *     `actions` (like a while loop). Default value is false.\n     *     \n     * @param context Used to create nested actions, and compile conditions or\n     *     expressions from the `stopCondition` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EALoop {\n        let stopCondition: EventCondition | null = null;\n        const stopConditionDef = obj['stopCondition'];\n        if (stopConditionDef != undefined) {\n            if (typeof stopConditionDef === 'string' ||\n                typeof stopConditionDef === 'number') {\n                stopCondition = new ECExpression(\n                    context.expressionCompiler.compile(stopConditionDef));\n            } else {\n                stopCondition = context.conditionFactory\n                    .fromJSONObject(stopConditionDef);\n            }\n        }\n        let maxIterations = obj['maxIterations'];\n        if (maxIterations == undefined) {\n            maxIterations = 0;\n        } else if (typeof maxIterations === 'number') {\n            maxIterations = maxIterations > 0 ? maxIterations : 0;\n        } else {\n            throw new Error('maxIterations needs to be a number.');\n        }\n        let checkStopConditionAtEnd = obj['checkStopConditionAtEnd'];\n        if (checkStopConditionAtEnd == undefined) {\n            checkStopConditionAtEnd = false;\n        } else if (typeof checkStopConditionAtEnd !== 'boolean') {\n            throw new Error('checkStopConditionAtEnd need to be a boolean.');\n        }\n        if (!Array.isArray(obj['actions'])) {\n            throw new Error('Missing actions.');\n        }\n        return new EALoop(stopCondition, maxIterations, checkStopConditionAtEnd,\n                          context.actionFactory.fromJSONArray(obj['actions']));\n    }\n    \n    async execute(context: EventActionExecutionContext): Promise<void> {\n        let i = 0;\n        context.gameState.tracer.traceAction([EALoop.ID, []]);\n        if (this._checkStopConditionAtEnd) {\n            do {\n                for (let action of this._actions) {\n                    await action.execute(context);\n                }\n                if (this._maxIterations > 0) {\n                    i++;\n                    if (i >= this._maxIterations) break;\n                }\n            } while (this._stopCondition === null ||\n                     this._stopCondition.check(context));\n        } else {\n            while (this._stopCondition === null ||\n                   this._stopCondition.check(context)) {\n                for (let action of this._actions) {\n                    await action.execute(context);\n                }\n                if (this._maxIterations > 0) {\n                    i++;\n                    if (i >= this._maxIterations) break;\n                }\n            }\n        }\n    }\n\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>();\n        for (let action of this._actions) {\n            builder.add(action.collectTranslationKeys());\n        }\n        return builder.get();\n    }\n\n}\n\n/**\n * Updates one game state variables.\n */\nexport class EAUpdateVariable extends EventAction {\n\n    constructor(private _varName: string, private _updateExpr: CompiledEventExpression) {\n        super();\n    }\n\n    static ID = 'UpdateVariable';\n    \n    /**\n     * Creates an `EAUpdateVariable` instance from its JSON definition stored in\n     * the given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"UpdateVariable\",\n     *         \"variable\": string,\n     *         \"value\": number | string\n     *     }\n     *     ```\n     *     The `value` field can also be an expression.\n     * @param context Used to compile the expression in the `value` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAUpdateVariable {\n        if (!obj['variable']) throw new Error('Missing variable name.');\n        if (obj['value'] == undefined) throw new Error('Missing value.');\n        let expr = obj['value'];\n        if (typeof expr !== 'number' && typeof expr !== 'string') {\n            throw new Error('Value must be either a number of a string.');\n        }\n        return new EAUpdateVariable(obj['variable'],\n                                    context.expressionCompiler.compile(expr));\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EAUpdateVariable.ID, []]);\n        context.gameState.setVar(this._varName,\n                                 context.evaluator.eval(this._updateExpr),\n                                 false);\n    }\n\n}\n\n/**\n * Updates one or more game state variables.\n */\nexport class EAUpdateVariables extends EventAction {\n\n    constructor(private _varNames: string[], private _updateExprs: CompiledEventExpression[]) {\n        super();\n        if (_varNames.length !== _updateExprs.length) {\n            throw new Error('The number of variables must be equal to the number of expressions.');\n        }\n    }\n\n    static ID = 'UpdateVariables';\n\n    /**\n     * Creates an `EAUpdateVariables` instance from its JSON definition stored\n     * in the given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"UpdateVariables\",\n     *         \"updates\": { [varName: string]: string | number }\n     *     }\n     *     ```\n     * @param context Used to compile expressions in the `updates` map.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAUpdateVariables {\n        if (!obj['updates']) throw new Error('Missing update definitions.');\n        let varNames: string[] = [];\n        let exprs: CompiledEventExpression[] = [];\n        for (let varName in obj['updates']) {\n            varNames.push(varName);\n            exprs.push(\n                context.expressionCompiler.compile(obj['updates'][varName]));\n        }\n        return new EAUpdateVariables(varNames, exprs);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EAUpdateVariables.ID, []]);\n        for (let i = 0;i < this._varNames.length;i++) {\n            context.gameState.setVar(\n                this._varNames[i],\n                context.evaluator.eval(this._updateExprs[i])\n            );\n        }\n    }\n\n}\n\n/**\n * Updates one or more variables' limits.\n */\nexport class EAUpdateVariableLimits extends EventAction {\n\n    constructor(private _limitsByVarName: Record<string, [number, number]>) {\n        super();\n    }\n\n    static ID = 'UpdateVariableLimits';\n\n    /**\n     * Creates an `EAUpdateVariableLimits` instance from its JSON definition\n     * stored in the given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"UpdateVariableLimits\",\n     *         \"updates\": { [varName: string]: [number, number] }\n     *     }\n     *     ```\n     *     Limits are defined via a pair of constant numbers, where the first\n     *     number specifies the lower bound (inclusive) and the second number\n     *     specifies the upper bound (inclusive). The can be Infinity or\n     *     -Infinity, but cannot be NaN expressions.\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAUpdateVariableLimits {\n        if (!obj['updates']) throw new Error('Missing update definitions.');\n        let limitsByVarName: Record<string, [number, number]> = {};\n        for (const varName in obj['updates']) {\n            let limits = obj['updates'][varName];\n            if (!Array.isArray(limits) || limits.length !== 2 ||\n                typeof limits[0] !== 'number' ||\n                typeof limits[1] !== 'number') {\n                throw new Error('Limits need to be two-element tuples.');\n            }\n            limitsByVarName[varName] = <[number, number]>limits;\n        }\n        return new EAUpdateVariableLimits(limitsByVarName);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        for (const varName in this._limitsByVarName) {\n            const limits = this._limitsByVarName[varName];\n            context.gameState.setVarLimits(varName, limits[0], limits[1]);\n        }\n        context.gameState.tracer.traceAction([EAUpdateVariableLimits.ID, []]);\n    }\n}\n\n/**\n * Gives the player a certain amount of a certain item.\n */\nexport class EAGiveItem extends EventAction {\n\n    constructor(private _itemId: string, private _amountExpr: CompiledEventExpression) {\n        super();\n    }\n\n    static ID = 'GiveItem';\n\n    /**\n     * Creates an `EAGiveItem` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"GiveItem\",\n     *         \"itemId\": string,\n     *         \"amount\": number | string\n     *     }\n     *     ```\n     *     The `amount` field can also be an expression.\n     * @param context Used to compile the expression in the `amount` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAGiveItem {\n        if (obj['itemId'] == undefined) throw new Error('Missing item id.');\n        // We allow amount to be an expression.\n        if (typeof obj['amount'] !== 'string' &&\n            typeof obj['amount'] !== 'number') {\n            throw new Error('Amount must be a number or an expression.');\n        }\n        return new EAGiveItem(\n            obj['itemId'], context.expressionCompiler.compile(obj['amount']));\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EAGiveItem.ID, []]);\n        let amount = context.evaluator.eval(this._amountExpr);\n        if (amount > 0) {\n            context.gameState.playerInventory.add(this._itemId, amount);\n        } else if (amount < 0) {\n            context.gameState.playerInventory.remove(this._itemId, -amount);\n        }\n    }\n\n}\n\n/**\n * Updates the amounts of items relatively.\n */\nexport class EAUpdateItemAmounts extends EventAction {\n\n    constructor(private _itemIds: string[], private _updateExprs: CompiledEventExpression[]) {\n        super();\n        if (_itemIds.length !== _updateExprs.length) {\n            throw new Error('The number of items must match the number of expressions.');\n        }\n    }\n\n    static ID = 'UpdateItemAmounts';\n\n    /**\n     * Creates an `EAUpdateItemAmounts` instance from its JSON definition stored\n     * in the given JSON object.\n     * @param obj Schema:\n     *     ``\n     *     {\n     *         \"id\": \"UpdateItemAmounts\",\n     *         \"updates\": { [itemId: string]: number | string; }\n     *     }\n     *     ```\n     * @param context Used to compute the item amount expressions in the\n     *     `update` field.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAUpdateItemAmounts {\n        if (obj['updates'] == undefined) {\n            throw new Error('Missing update definitions.');\n        }\n        let itemIds: string[] = [];\n        let updateExprs: CompiledEventExpression[] = [];\n        for (const itemId in obj['updates']) {\n            itemIds.push(itemId);\n            updateExprs.push(\n                context.expressionCompiler.compile(obj['updates'][itemId]));\n        }\n        return new EAUpdateItemAmounts(itemIds, updateExprs);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EAUpdateItemAmounts.ID, []]);\n        for (let i = 0;i < this._itemIds.length;i++) {\n            const itemId = this._itemIds[i];\n            const amount = context.evaluator.eval(this._updateExprs[i]);\n            if (amount > 0) {\n                context.gameState.playerInventory.add(itemId, amount);\n            } else if (amount < 0) {\n                context.gameState.playerInventory.remove(itemId, -amount);\n            }\n        }\n    }\n\n}\n\n/**\n * Ends the game.\n */\nexport class EAEndGame extends EventAction {\n\n    constructor(private _message: string, private _confirm: string,\n                private _winning: boolean, private _fx?: string) {\n        super();\n    }\n\n    static ID = 'EndGame';\n\n    /**\n     * Creates an `EAEndGame` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"EndGame\",\n     *         \"message\": string,\n     *         \"confirm\": string,\n     *         \"winning\": boolean,\n     *         \"fx\": string | undefined\n     *     }\n     *     ```\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EAEndGame {\n        if (typeof(obj['message']) !== 'string') {\n            throw new Error('Missing message.');\n        }\n        if (typeof(obj['confirm']) !== 'string') {\n            throw new Error('Missing confirm message.');\n        }\n        if (typeof(obj['winning']) !== 'boolean') {\n            throw new Error('Missing winning status.');\n        }\n        if (obj['fx'] && typeof(obj['fx']) !== 'string') {\n            throw new Error('FX must be a string.');\n        }\n        return new EAEndGame(obj['message'], obj['confirm'], obj['winning'],\n                             obj['fx']);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        await context.actionProxy.displayMessage(this._message, this._confirm,\n                                                 '', this._fx);\n        context.gameState.endGameState = this._winning\n            ? EndGameState.Winning\n            : EndGameState.Losing;\n        context.gameState.tracer.traceAction([EAEndGame.ID, []]);\n    }\n\n    collectTranslationKeys(): Set<string> {\n        return new Set([this._message, this._confirm]);\n    }\n\n}\n\n/**\n * Sets a status effect on or off.\n */\nexport class EASetStatus extends EventAction {\n\n    constructor(private _statusId: string, private _on: boolean) {\n        super();\n    }\n\n    static ID = 'SetStatus';\n    \n    /**\n     * Creates an `EASetStatus` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema\n     *     ```\n     *     {\n     *         \"id\": \"SetStatus\",\n     *         \"statusId\": string,\n     *         \"on\": boolean\n     *     }\n     *     ```\n     * @param context Not used.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EASetStatus {\n        if (typeof(obj['statusId']) !== 'string') {\n            throw new Error('Missing status id.');\n        }\n        if (typeof(obj['on']) !== 'boolean') {\n            throw new Error('Missing on/off indicator.');\n        }\n        return new EASetStatus(obj['statusId'], obj['on']);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        if (this._on) {\n            context.gameState.playerStatus.add(this._statusId);\n        } else {\n            context.gameState.playerStatus.remove(this._statusId);\n        }\n        context.gameState.tracer.traceAction([EASetStatus.ID, []]);\n    }\n\n}\n\ninterface TriggerInfo {\n    id: string;\n    priority: number;\n    probability?: CompiledEventExpression;\n}\n\n/**\n * Triggers one or more events via one or more trigger ids.\n * \n * IMPORTANT: Game events will be triggered asynchronously instead of\n * synchronously:\n * \n * 1. Each trigger id listed in this action will be pushed to a queue in order\n *    and processed after all game events from the ongoing trigger are handled.\n * 2. The same trigger id can be used multiple times if you need certain game\n *    events to be triggered multiple times.\n * 3. The processing order is determined by priority (trigger ids with higher\n *    priorities will be processed earlier than those with lower priorities).\n *    In case of ties, use the time when they are pushed into the queue.\n * \n * Example:\n * \n * Suppose you define a game event named \"HandleTick\" triggered by \"Tick\", which\n * contains a `TriggerEvents` action with the following trigger definitions in\n * order:\n * \n * (1) \"A\" with priority 100;\n * (2) \"B\" with priority 100;\n * (3) \"C\" with priority 200.\n * \n * Suppose you also define another game event named \"HandleA\" triggered by\n * \"A\", which contains an event action that triggers \"C\" with priority 50.\n * \n * Then after \"Tick\" is triggered,\n * \n * 1. \"C\" is triggered;\n * 2. \"A\" is triggered;\n * 3. \"B\" is triggered;\n * 4. \"C\" is triggered.\n */\nexport class EATriggerEvents extends EventAction {\n\n\n    constructor(private _triggerInfoList: TriggerInfo[]) {\n        super();\n    }\n\n    static ID = 'TriggerEvents'\n\n    /**\n     * Creates an `EATriggerEvents` instance from its JSON definition stored in\n     * the given JSON object.\n     * @param obj Schema\n     *     ```\n     *     {\n     *         \"id\": \"TriggerEvents\",\n     *         \"triggers\": [\n     *             {\n     *                 \"id\": string,\n     *                 \"priority\": number | undefined,\n     *                 \"probability\": number | string | undefined\n     *             }\n     *         ]\n     *     }\n     *     ```\n     *     The default `priority` is 0. Triggers with higher priorities with be\n     *     processed earlier than those with lower priorities. In case of same\n     *     priorities, triggers defined first will be processed first.\n     *     `probability` defaults to 1 if not set, meaning the 100% chance of\n     *     triggering. It can also be an expression that will be evaluated when\n     *     the event action is executed.\n     * @param context Used to compile expressions in the `probability` fields.\n     */\n    static fromJSONObject(obj: any, context: EventActionDeserializationContext): EATriggerEvents {\n        let triggerInfoList: TriggerInfo[] = [];\n        if (!obj['triggers'] || !Array.isArray(obj['triggers'])) {\n            throw new Error('Missing trigger definitions.');\n        }\n        for (const trigger of obj['triggers']) {\n            let triggerId = trigger['id'];\n            if (typeof triggerId !== 'string') {\n                throw new Error('Missing valid trigger id.');\n            }\n            let priority = trigger['priority'] || 0;\n            if (typeof priority !== 'number' || isNaN(priority)) {\n                throw new Error('Priority must be a valid number.');\n            }\n            let triggerInfo: TriggerInfo = {\n                \"id\": triggerId,\n                \"priority\": priority\n            };\n            let probability = trigger['probability'];\n            if (probability != undefined) {\n                if (typeof probability !== 'string' &&\n                    typeof probability !== 'number') {\n                    throw new Error('Invalid probability definition.');\n                }\n                triggerInfo['probability'] =\n                    context.expressionCompiler.compile(probability);\n            }\n            triggerInfoList.push(triggerInfo);\n        }\n        return new EATriggerEvents(triggerInfoList);\n    }\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        context.gameState.tracer.traceAction([EATriggerEvents.ID, []]);\n        for (const trigger of this._triggerInfoList) {\n            const probability = trigger.probability == undefined\n                ? 1.0\n                : context.evaluator.eval(trigger.probability);\n            context.gameState.pushPendingTrigger(trigger.id, probability,\n                                                 trigger.priority);\n        }\n    }\n\n}\n","import { EventCondition, EventConditionEvaluationContext } from './core';\nimport { CompiledEventExpression, EventExpressionCompiler } from './expression';\n\ninterface EventConditionDeserializationContext {\n    conditionFactory: EventConditionFactory;\n    expressionCompiler: EventExpressionCompiler;\n}\n\ntype EventConditionDeserializer =\n    (obj: object, context: EventConditionDeserializationContext) => EventCondition;\n\nexport interface EventConditionDeserializerDefinition {\n    ID: string;\n    fromJSONObject: EventConditionDeserializer;\n}\n\nexport class EventConditionFactory {\n\n    private _deserializers: Map<string, EventConditionDeserializer> = new Map();\n    private _deserializationContext: EventConditionDeserializationContext;\n\n    constructor(expressionCompiler: EventExpressionCompiler) {\n        this._deserializationContext = {\n            conditionFactory: this,\n            expressionCompiler: expressionCompiler\n        };\n    }\n\n    registerDeserializer(def: EventConditionDeserializerDefinition) : void {\n        this._deserializers.set(def.ID, def.fromJSONObject);\n    }\n\n    fromJSONObject(obj: object): EventCondition {\n        if (!('id' in obj) || typeof obj.id !== 'string') {\n            throw new Error('Condition id must be a string.');\n        }\n        const conditionId = obj.id;\n        const deserializer = this._deserializers.get(conditionId);\n        if (deserializer == undefined) {\n            throw new Error(`No deserializer defined for \"${conditionId}\".`);\n        }\n        return deserializer(obj, this._deserializationContext);\n    }\n\n    /**\n     * A more relaxed version of `fromJSONObject()` that allows expression\n     * inputs (string or number) in addition to objects.\n     */\n    fromJSON(obj: any): EventCondition {\n        if (obj == undefined) throw new Error('JSON input cannot be null.');\n        if (typeof obj === 'number' || typeof obj === 'string') {\n            return new ECExpression(\n                this._deserializationContext.expressionCompiler.compile(obj));\n        } else if (typeof obj === 'object') {\n            return this.fromJSONObject(obj);\n        } else {\n            throw new Error('Unsupported JSON input.');\n        }\n    }\n\n    fromJSONArray(objectArray: any[]): EventCondition[] {\n        return objectArray.map((obj) => this.fromJSON(obj));\n    }\n\n}\n\n/**\n * Represents a condition constructed from a simple expression. The condition\n * evaluates to true when the expression evaluates to a valid non-zero number\n * (no NaN).\n */\nexport class ECExpression extends EventCondition {\n\n    constructor(private _expression: CompiledEventExpression) {\n        super();\n    }\n\n    static ID = 'Expression';\n    \n    /**\n     * Creates a new `ECExpression` instance from its JSON definition stored in\n     * the given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Expression\",\n     *         \"expression\": number | string\n     *     }\n     *     ```\n     * @param context The required context to construct the event condition.\n     */\n    static fromJSONObject(obj: object, context: EventConditionDeserializationContext): ECExpression {\n        if (!('expression' in obj) || obj.expression == undefined) {\n            throw new Error('Missing expression.');\n        }\n        const expression = obj.expression;\n        if (typeof expression !== 'number' && typeof expression !== 'string') {\n            throw new Error('Expression must be a number or string.');\n        }\n        return new ECExpression(context.expressionCompiler.compile(expression));\n    }\n\n    check(context: EventConditionEvaluationContext): boolean {\n        return !!context.evaluator.eval(this._expression);\n    }\n\n}\n\n/**\n * Negates the given condition.\n */\nexport class ECNot extends EventCondition {\n\n    constructor(private _condition: EventCondition) {\n        super();\n    }\n\n    static ID = 'Not';\n    \n    /**\n     * Creates a new `ECNot` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Not\",\n     *         \"condition\": number | string | EventCondition\n     *     }\n     *     ```\n     * @param context The required context to construct the event condition.\n     */\n    static fromJSONObject(obj: object, context: EventConditionDeserializationContext): ECNot {\n        if (!('condition' in obj) || obj.condition == undefined) {\n            throw new Error('Missing condition definition.');\n        }\n        return new ECNot(context.conditionFactory.fromJSON(obj.condition));\n    }\n\n    check(context: EventConditionEvaluationContext): boolean {\n        return !this._condition.check(context);\n    }\n\n}\n\n/**\n * Evaluates to true if an only if all sub-conditions evaluate true.\n */\nexport class ECAll extends EventCondition {\n    \n    constructor(private _conditions: EventCondition[]) {\n        super();\n    }\n\n    static ID = 'All'\n\n    /**\n     * Creates a new `ECAll` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"All\",\n     *         \"conditions\": Array<number | string | EventCondition>\n     *     }\n     *     ```\n     *     Each sub-condition in `conditions` can either be a simple expression\n     *     or another event condition.\n     * @param context The required context to construct the event condition.\n     */\n    static fromJSONObject(obj: object, context: EventConditionDeserializationContext): ECAll {\n        if (!('conditions' in obj) || !Array.isArray(obj.conditions)) {\n            throw new Error('Missing condition definitions.');\n        }\n        return new ECAll(\n            context.conditionFactory.fromJSONArray(obj.conditions));\n    }\n\n    check(context: EventConditionEvaluationContext): boolean {\n        for (let cond of this._conditions) {\n            if (!cond.check(context)) return false; \n        }\n        return true;\n    }\n\n}\n\n/**\n * Evaluates to true if any sub-condition evaluates true.\n */\nexport class ECAny extends EventCondition {\n    \n    constructor(private _conditions: EventCondition[]) {\n        super();\n    }\n\n    static ID = 'Any';\n\n    /**\n     * Creates a new `ECAny` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Any\",\n     *         \"conditions\": Array<number | string | EventCondition>\n     *     }\n     *     ```\n     *     Each sub-condition in `conditions` can either be a simple expression\n     *     or another event condition.\n     * @param context The required context to construct the event condition.\n     */\n    static fromJSONObject(obj: object, context: EventConditionDeserializationContext): ECAny {\n        if (!('conditions' in obj) || !Array.isArray(obj.conditions)) {\n            throw new Error('Missing condition definitions.');\n        }\n        return new ECAny(\n            context.conditionFactory.fromJSONArray(obj.conditions));\n    }\n\n    check(context: EventConditionEvaluationContext): boolean {\n        for (let cond of this._conditions) {\n            if (cond.check(context)) return true;\n        }\n        return false;\n    }\n\n}\n\n/**\n * Evaluates to true if some sub-conditions evaluate true.\n */\nexport class ECSome extends EventCondition {\n    \n    constructor(private _conditions: EventCondition[],\n                private _min: CompiledEventExpression,\n                private _max: CompiledEventExpression) {\n        super();\n    }\n\n    static ID = 'Some';\n\n    /**\n     * Creates a new `ECSome` instance from its JSON definition stored in the\n     * given JSON object.\n     * @param obj Schema:\n     *     ```\n     *     {\n     *         \"id\": \"Some\",\n     *         \"min\": number | string | undefined,\n     *         \"max\": number | string | undefined,\n     *         \"conditions\": Array<number | string | EventCondition>\n     *     }\n     *     ```\n     *     Each sub-condition in `conditions` can either be a simple expression\n     *     or another event condition.\n     * \n     *     `min` (inclusive) and `max` (inclusive) specifies the allowed number\n     *     of sub-conditions that can be true. They can be a constant number or\n     *     an expression. If not set, `min` defaults to `-Infinity` and `max`\n     *     defaults to `Infinity`.\n     * \n     *     If you require exactly N sub-conditions to be true, set `min` and\n     *     `max` to the same value N.\n     * @param context The required context to construct the event condition.\n     */\n    static fromJSONObject(obj: object, context: EventConditionDeserializationContext): ECSome {\n        if (!('conditions' in obj) || !Array.isArray(obj['conditions'])) {\n            throw new Error('Missing condition definitions.');\n        }\n        const conditions =\n            context.conditionFactory.fromJSONArray(obj['conditions']);\n        let min: CompiledEventExpression;\n        if (!('min' in obj)) {\n            min = context.expressionCompiler.compile(-Infinity);\n        } else if (typeof obj['min'] === 'number' ||\n                   typeof obj['min'] === 'string') {\n            min = context.expressionCompiler.compile(obj['min']);\n        } else {\n            throw new Error('min must be a valid number or expression string.');\n        }\n        let max: CompiledEventExpression;\n        if (!('max' in obj)) {\n            max = context.expressionCompiler.compile(Infinity);\n        } else if (typeof obj['max'] === 'number' ||\n                   typeof obj['max'] === 'string') {\n            max = context.expressionCompiler.compile(obj['max']);\n        } else {\n            throw new Error('max must be a valid number or expression string.');\n        }\n        return new ECSome(conditions, min, max);\n    }\n\n    check(context: EventConditionEvaluationContext): boolean {\n        const min = context.evaluator.eval(this._min);\n        const max = context.evaluator.eval(this._max);\n        let n = 0;\n        for (let c of this._conditions) {\n            if (c.check(context)) n++;\n        }\n        return n >= min && n <= max;\n    }\n\n}\n","/**\n * Core definitions for the event system.\n */\nimport { GameState } from '../gameState';\nimport { SetBuilder } from '../utils/collection';\nimport { EventExpressionEvaluator, CompiledEventExpression } from './expression';\n\n/**\n * Delegates the execution of actual GUI related actions.\n * An instance will be passed as an argument in the execute()\n * function so each EventAction instance does not need to hold references to \n * action targets such as the GUI instances.\n * EventAction instances do not need to know the implementation details of\n * the action targets.\n */\nexport interface GuiActionProxy {\n    /**\n     * Provides the ability to display a message.\n     * @param message Message (potentially unlocalized) to be displayed.\n     * @param confirm Text (potentially unlocalized) of the confirm button.\n     */\n    displayMessage(message: string, confirm: string, icon?: string, fx?: string): Promise<void>;\n    /**\n     * Provides the ability to display a message with multiple choices.\n     * @param message Message (potentially unlocalized) to be displayed.\n     * @param choices Texts (potentially unlocalized) of choices.\n     */\n    displayChoices(message: string, choices: Array<[string, number]>, icon?: string): Promise<number>;\n}\n\n/**\n * Context needed to evaluate an `EventCondition`.\n */\nexport interface EventConditionEvaluationContext {\n    readonly gameState: GameState;\n    readonly evaluator: EventExpressionEvaluator;\n}\n\n/**\n * Represents a condition.\n * The implementation should be stateless and only storing necessary\n * definitions.\n */\nexport abstract class EventCondition {\n\n    check(context: EventConditionEvaluationContext): boolean {\n        throw new Error('Not implemented.');\n    }\n\n}\n\n/**\n * Context needed to execute an `EventAction`.\n */\nexport interface EventActionExecutionContext extends EventConditionEvaluationContext {\n    readonly actionProxy: GuiActionProxy;\n}\n\n/**\n * Represents an action.\n * The implementation should be stateless and only storing necessary\n * definitions.\n */\nexport abstract class EventAction {\n\n    async execute(context: EventActionExecutionContext): Promise<void> {\n        throw new Error('Not implemented.');\n    }\n\n    // Collects all translation keys defined in this event action as a set.\n    collectTranslationKeys(): Set<string> {\n        return new Set();\n    }\n\n}\n\n/**\n * Represents a game event.\n * The implementation should be stateless and only contain necessary\n * definitions.\n */\nexport class GameEvent {\n    \n    constructor(private _id: string, private _trigger: string,\n                private _conditions: EventCondition[] = [],\n                private _actions: EventAction[] = [],\n                private _probability: number | CompiledEventExpression = 1.0,\n                private _exclusions: string[] = [],\n                private _once: boolean = false)\n    {\n    }\n    /**\n     * Unique identifier of this event.\n     */\n    get id(): string {\n        return this._id;\n    }\n    /**\n     * Trigger id.\n     */\n    get trigger(): string {\n        return this._trigger;\n    }\n    /**\n     * Conditions for this event.\n     */\n    get conditions(): EventCondition[] {\n        return this._conditions;\n    }\n    /**\n     * Actions for this event.\n     */\n    get actions(): EventAction[] {\n        return this._actions;\n    }\n    /**\n     * Probability of executing the actions if all conditions are meet.\n     */\n    get probability(): number | CompiledEventExpression {\n        return this._probability;\n    }\n    /**\n     * Collection of event ids that are not allowed to be triggered under the\n     * SAME trigger after successfully executing all actions of this event.\n     */\n    get exclusions(): string[] {\n        return this._exclusions;\n    }\n    /**\n     * Returns if this event only occurs once.\n     */\n    get once(): boolean {\n        return this._once;\n    }\n\n    /**\n     * Collects translation keys from all event actions\n     */\n    collectTranslationKeys(): Set<string> {\n        const builder = new SetBuilder<string>();\n        this._actions.forEach((a) => builder.add(a.collectTranslationKeys()));\n        return builder.get();\n    }\n}\n\n","import { GameEvent, GuiActionProxy, EventAction, EventActionExecutionContext } from './core';\nimport { GameState, EndGameState } from '../gameState';\nimport { EventExpressionEngine } from './expression';\n\ninterface GameEventInfo {\n    event: GameEvent;\n    disabled: boolean;\n}\n\nexport class GameEventEngine {\n\n    private _eventsByTrigger: Map<string, GameEvent[]> = new Map();\n    // id => (GameEvent, disabled)\n    private _eventInfoById: Map<string, GameEventInfo> = new Map();\n    private _gameState: GameState;\n    private _actionProxy: GuiActionProxy;\n    // Event actions and condition have access to the same expression evaluator.\n    private _exprEngine: EventExpressionEngine;\n    private _executionContext: EventActionExecutionContext;\n\n    constructor(gameState: GameState, actionProxy: GuiActionProxy,\n                expressionEngine: EventExpressionEngine) {\n        this._gameState = gameState;\n        this._actionProxy = actionProxy;\n        this._exprEngine = expressionEngine;\n        this._executionContext = {\n            gameState: gameState,\n            actionProxy: actionProxy,\n            evaluator: expressionEngine\n        };\n    }\n\n    public onActionExecuted: ((gs: GameState) => void ) | undefined = undefined;\n    \n    enableAll(): void {\n        for (let info of this._eventInfoById.values()) {\n            info.disabled = false;\n        }\n    }\n\n    registerEvents(events: GameEvent[]): void {\n        for (let e of events) {\n            this.registerEvent(e);\n        }\n    }\n\n    registerEvent(e: GameEvent): void {\n        if (this._eventInfoById.has(e.id)) {\n            throw new Error(`Event \"${e.id}\" is already registered.`);\n        }\n        this._eventInfoById.set(e.id, {\n            event: e,\n            disabled: false\n        });\n        let existingEvents = this._eventsByTrigger.get(e.trigger);\n        if (existingEvents == undefined) {\n            this._eventsByTrigger.set(e.trigger, [e]);\n        } else {\n            existingEvents.push(e);\n        }\n    }\n\n    unregisterEvent(e: GameEvent): void {\n        if (!this._eventInfoById.has(e.id)) return;\n        this._eventInfoById.delete(e.id);\n        let existingEvents = this._eventsByTrigger.get(e.trigger);\n        if (existingEvents != undefined) {\n            const index = existingEvents.indexOf(e);\n            if (index >= 0) {\n                existingEvents.splice(index, 1);\n                if (existingEvents.length === 0) {\n                    this._eventsByTrigger.delete(e.trigger);\n                }\n                return;\n            }\n        }\n        throw new Error('Invariance broken: event has info entry but not registered under any trigger id.');\n    }\n\n    getEvents(): GameEvent[] {\n        let events: GameEvent[] = [];\n        for (let info of this._eventInfoById.values()) {\n            events.push(info.event);\n        }\n        return events;\n    }\n\n    /**\n     * Triggers events.\n     * @param t Trigger id.\n     */\n    async trigger(t: string): Promise<void> {\n        if (t.length === 0) throw new Error('Trigger id cannot be empty.');\n        const events = this._eventsByTrigger.get(t);\n        if (events == undefined) return;\n        let exclusions: { [key: string]: boolean; } = {};\n        let gameEnded = false;\n        for (let e of events) {\n            if (gameEnded) break;\n            let info = this._eventInfoById.get(e.id) as GameEventInfo;\n            // Skip disabled events.\n            if (info.disabled) continue;\n            // Skip mutually exclusive events.\n            if (exclusions[e.id]) continue;\n            // Check all the conditions.\n            let skip = false;\n            for (let c of e.conditions) {\n                if (!c.check(this._executionContext)) {\n                    skip = true;\n                    break;\n                }\n            }\n            if (skip) continue;\n            // Randomness\n            const p = typeof e.probability === 'number'\n                ? e.probability\n                : this._exprEngine.eval(e.probability);\n            if (p <= 0 || (p < 1 && this._gameState.nextRandomNumber() > p)) {\n                continue;\n            }\n            // Add exclusions\n            for (let ex of e.exclusions) {\n                exclusions[ex] = true;\n            }\n            // Mark as occurred\n            if (this._gameState.occurredEvents[e.id] == undefined)\n            {\n                this._gameState.occurredEvents[e.id] = 0;\n            }\n            ++this._gameState.occurredEvents[e.id];\n\n            this._gameState.tracer.traceEvent(e.id);\n            // Execute actions\n            gameEnded = await this.executeActions(e.actions);\n            // Once\n            if (e.once) {\n                info.disabled = true;\n            }\n        }\n    }\n\n    async executeActions(actions: EventAction[]): Promise<boolean> {\n        for (let a of actions) {\n            await a.execute(this._executionContext);\n            if (this.onActionExecuted) this.onActionExecuted(this._gameState);\n            if (this._gameState.endGameState !== EndGameState.None) {\n                // Stop processing further actions or events\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","import { FunctionTable, ExpressionEvaluator, CompiledExpression, FunctionTableProvider, ExpressionCompiler, compileExpression } from '../utils/expression';\nimport { GameState } from '../gameState';\n\nexport interface EventExpressionFunctionTable extends FunctionTable {\n    // Math functions. \n    random(): number;\n    randi(x: number): number;\n    max(...values: number[]): number;\n    min(...values: number[]): number;\n    floor(x: number): number;\n    round(x: number): number;\n    ceil(x: number): number;\n    clip(x: number, min: number, max: number): number;\n    /**\n     * Sets variable limits.\n     */\n    setVarLimits(varName: string, lb: number, ub: number): void;\n    /**\n     * Retrieves the upper bound of a game variable.\n     */\n    upperBound(varName: string): number;\n    /**\n     * Retrieves the lower bound of a game variable.  \n     */  \n    lowerBound(varName: string): number;\n    /**\n     * Checks if the specified event has occurred.\n     */\n    eventOccurred(id: string): boolean;\n    /**\n     * Returns the number of specified items.\n     */\n    itemCount(id: string): number;\n    /**\n     * Returns the total months.\n     */\n    totalMonths(): number;\n    /**\n     * Checks if the player has the specified status.\n     */\n    hasStatus(id: string): boolean;\n    /**\n     * Calculates the effect value.\n     */\n    calcEffectValue(id: string, base: number): number;\n}\n\nexport type CompiledEventExpression = CompiledExpression<EventExpressionFunctionTable>;\nexport type EventExpressionCompiler = ExpressionCompiler<EventExpressionFunctionTable>;\nexport type EventExpressionEvaluator = ExpressionEvaluator<EventExpressionFunctionTable>;\nexport type EventFunctionTableProvider = FunctionTableProvider<EventExpressionFunctionTable>;\n\nexport class EventExpressionEngine implements EventFunctionTableProvider, EventExpressionCompiler, EventExpressionEvaluator {\n\n    private _fTable: EventExpressionFunctionTable;\n    private _gameState: GameState;\n    private _cache: { [key: string]: CompiledEventExpression } = {};\n\n    constructor(gs: GameState) {\n        this._gameState = gs;\n        this._fTable = this._initFunctionTable();\n    }\n\n    private _initFunctionTable(): EventExpressionFunctionTable {\n        return {\n            getVar: varName => this._gameState.getVar(varName, true),\n            setVarLimits: (varName: string, lb: number, ub: number) => this._gameState.setVarLimits(varName, lb, ub),\n            eventOccurred: id => this._gameState.occurredEvents[id] != undefined,\n            upperBound: varName => this._gameState.getVarLimits(varName)[1],\n            lowerBound: varName => this._gameState.getVarLimits(varName)[0],\n            itemCount: id => this._gameState.playerInventory.count(id),\n            totalMonths: () => this._gameState.getVar('year', true) * 12 + this._gameState.getVar('month', true),\n            calcEffectValue: (id, base) => {\n                const eItem = this._gameState.playerInventory.calcCombinedEffectValue(id);\n                const eStatus = this._gameState.playerStatus.calcCombinedEffectValue(id);\n                return (base + eItem[0] + eStatus[0]) * eItem[1] * eStatus[1];\n            },\n            hasStatus: id => this._gameState.playerStatus.count(id) > 0,\n            random: () => this._gameState.nextRandomNumber(),\n            randi: x => Math.floor(this._gameState.nextRandomNumber()),\n            max: Math.max,\n            min: Math.min,\n            floor: Math.floor,\n            round: Math.round,\n            ceil: Math.ceil,\n            clip: (x, min, max) => x < min ? x : (x > max ? max : x)\n        };\n    }\n\n    getClosure(): EventExpressionFunctionTable {\n        return this._fTable;\n    }\n\n    existsFunction(fname: string): boolean {\n        return this._fTable[fname] != undefined;\n    }\n\n    compile(expr: string | number): CompiledEventExpression {\n        if (typeof expr === \"number\") {\n            return {\n                source: expr.toString(),\n                fn: () => expr\n            };\n        }\n        if (!this._cache[expr]) {\n            this._cache[expr] = compileExpression(expr, this);\n        }\n        return this._cache[expr];\n    }\n\n    eval(expr: CompiledExpression<EventExpressionFunctionTable>): number {\n        let val = expr.fn(this.getClosure());\n        if (isNaN(val)) throw new Error('Expression produced NaN.');\n        return val;\n    }\n\n}\n","import { EventConditionFactory } from './conditions';\nimport { EventActionFactory } from './actions';\nimport { GameEvent } from './core';\nimport { downloadAndParse } from '../utils/network';\nimport { load as loadYaml } from 'js-yaml';\nimport { CompiledEventExpression, EventExpressionCompiler } from './expression';\n\nexport class GameEventLoader {\n\n    private _exprCompiler: EventExpressionCompiler;\n    private _conditionFactory: EventConditionFactory;\n    private _actionFactory: EventActionFactory;\n\n    constructor(ec: EventExpressionCompiler, cf: EventConditionFactory, af: EventActionFactory) {\n        this._exprCompiler = ec;\n        this._conditionFactory = cf;\n        this._actionFactory = af;\n    }\n\n    async load(url: string): Promise<GameEvent[]> {\n        return downloadAndParse(url, s => this.loadFromString(s));\n    }\n\n    loadFromString(s: string): GameEvent[] {\n        return this.parseEvents(loadYaml(s) || {});\n    }\n\n    parseEvents(obj: any): GameEvent[] {\n        if (!Array.isArray(obj)) throw new Error('Expecting an array of event definitions.');\n        // Preserve this!\n        return obj.map(item => this.parseEvent(item));\n    }\n\n    /**\n     * Creates a game event from its description.\n     * Schema:\n     *  ```\n     *  {\n     *      id: string,\n     *      trigger: string | undefined, // undefined means never triggered.\n     *      conditions: EventCondition[] | undefined,\n     *      probability: number | string | undefined,\n     *      once: boolean | undefined,\n     *      exclusions: string[] | undefined,\n     *      actions: EventAction[]\n     *  }\n     *  ```\n     * @param obj JSON-like object.\n     */\n    parseEvent(obj: any): GameEvent {\n        if (obj['id'] == undefined) throw new Error('Missing event id.');\n        const id = obj['id'];\n        if (obj['trigger'] != undefined && typeof(obj['trigger']) !== 'string') {\n            throw new Error('Event trigger must be a string.');\n        }\n        const trigger = obj['trigger'] || '';\n        const conditions = Array.isArray(obj['conditions'])\n            ? obj['conditions'].map((item: any) => this._conditionFactory.fromJSONObject(item))\n            : [];\n        let probability: number | CompiledEventExpression;\n        if (obj['probability'] == undefined) {\n            probability = 1.0;\n        } else {\n            if (typeof obj['probability'] === 'number') {\n                probability = obj['probability'];\n            } else if (typeof obj['probability'] === 'string') {\n                probability = this._exprCompiler.compile(obj['probability']);\n            } else {\n                throw new Error('Probability must either a number or a string expression.');\n            }\n        }\n        const exclusions = Array.isArray(obj['exclusions']) ? obj['exclusions'] : [];\n        if (!Array.isArray(obj['actions'])) throw new Error('Missing actions.');\n        const actions = obj['actions'].map((item: any) => this._actionFactory.fromJSONObject(item));\n        const once = !!obj['once'];\n        return new GameEvent(id, trigger, conditions, actions, probability, exclusions, once);\n    }\n\n}\n","import { GuiActionProxy } from './event/core';\nimport { GameState, EndGameState } from './gameState';\nimport { GuiGameWindow, GuiGame } from './gui/guiGame';\nimport { ItemRegistry, Inventory } from './effect/item';\nimport { GameEventEngine } from './event/engine';\nimport { EventExpressionEngine } from './event/expression';\nimport { EventActionFactory, EALog, EADisplayMessage, EADisplayRandomMessage, EADisplayChoices, EARandom, EACoinFlip, EAUpdateVariable, EAUpdateVariables, EAGiveItem, EAUpdateItemAmounts, EAEndGame, EASetStatus, EASwitch, EAUpdateVariableLimits, EATriggerEvents, EALoop } from './event/actions';\nimport { EventConditionFactory, ECExpression, ECAll, ECAny, ECSome, ECNot } from './event/conditions';\nimport { GameEventLoader } from './event/loader';\nimport { StatusTable, StatusRegistry } from './effect/status';\n\nexport interface GameConfig {\n    initialRandomSeed?: string;\n    itemDefinitionUrl?: string;\n    statusDefinitionUrl?: string;\n    eventDefinitionUrl?: string;\n}\n\n/**\n * Central class for the game.\n */\nexport class GameEngine {\n\n    private _config: GameConfig;\n    private _itemRegistry: ItemRegistry;\n    private _statusRegistry: StatusRegistry;\n    private _actionProxy: GuiActionProxy;\n    private _gameState: GameState;\n    private _expressionEngine: EventExpressionEngine;\n    private _eventEngine: GameEventEngine;\n    private _actionFactory: EventActionFactory;\n    private _conditionFactory: EventConditionFactory;\n\n    private _dataLoaded: boolean = false;\n\n    constructor(config: GameConfig, ap: GuiActionProxy) {\n        // Copy the configuration.\n        this._config = Object.assign({}, config);\n        this._actionProxy = ap;\n        this._itemRegistry = new ItemRegistry();\n        this._statusRegistry = new StatusRegistry();\n        this._gameState = new GameState(this._itemRegistry,\n                                        this._statusRegistry,\n                                        this._config.initialRandomSeed);\n        this._expressionEngine = new EventExpressionEngine(this._gameState);\n        this._eventEngine = new GameEventEngine(this._gameState,\n                                                this._actionProxy,\n                                                this._expressionEngine);\n        this._conditionFactory = \n            new EventConditionFactory(this._expressionEngine);\n        this._actionFactory = new EventActionFactory(this._conditionFactory,\n                                                     this._expressionEngine);\n    }\n\n    /**\n     * Retrieves the game state.\n     */\n    get gameState(): GameState {\n        return this._gameState;\n    }\n\n    /**\n     * Retrieves the item registry.\n     */\n    get itemRegistry(): ItemRegistry {\n        return this._itemRegistry;\n    }\n\n    /**\n     * Retrieves the status registry.\n     */\n    get statusRegistry(): StatusRegistry {\n        return this._statusRegistry;\n    }\n\n    /**\n     * Retrieves the action proxy.\n     */\n    get actionProxy(): GuiActionProxy {\n        return this._actionProxy;\n    }\n\n    /**\n     * Retrieves the expression engine.\n     */\n    get expressionEngine(): EventExpressionEngine {\n        return this._expressionEngine;\n    }\n\n    /**\n     * Retrieves the event engine.\n     */\n    get eventEngine(): GameEventEngine {\n        return this._eventEngine;\n    }\n\n    /**\n     * Loads game data.\n     */\n    async loadGameData(): Promise<void> {\n        if (this._dataLoaded) return;\n        this._initFactories();\n        if (this._config.itemDefinitionUrl) {\n            await this._itemRegistry.loadItems(this._config.itemDefinitionUrl);\n        } else {\n            console.warn('Missing item definitions. No items loaded.');\n        }\n        if (this._config.statusDefinitionUrl) {\n            await this._statusRegistry.loadStatus(\n                this._config.statusDefinitionUrl);\n        } else {\n            console.warn('Missing status definitions. No status loaded.');\n        }\n        const eventLoader = new GameEventLoader(this._expressionEngine,\n                                                this._conditionFactory,\n                                                this._actionFactory);\n        if (this._config.eventDefinitionUrl) {\n            const events = await eventLoader.load(\n                this._config.eventDefinitionUrl);\n            this._eventEngine.registerEvents(events);\n            console.log(\n                `Successfully registered ${events.length} game events.`);\n        } else {\n            console.warn('Missing event definitions. No events loaded.');\n        }\n        this._dataLoaded = true;\n    }\n\n    private _initFactories(): void {\n        // Event factory\n        this._actionFactory.registerDeserializer(EALog);\n        this._actionFactory.registerDeserializer(EADisplayMessage);\n        this._actionFactory.registerDeserializer(EADisplayRandomMessage);\n        this._actionFactory.registerDeserializer(EADisplayChoices);\n        this._actionFactory.registerDeserializer(EARandom);\n        this._actionFactory.registerDeserializer(EACoinFlip);\n        this._actionFactory.registerDeserializer(EAUpdateVariable);\n        this._actionFactory.registerDeserializer(EAUpdateVariables);\n        this._actionFactory.registerDeserializer(EAUpdateVariableLimits);\n        this._actionFactory.registerDeserializer(EAGiveItem);\n        this._actionFactory.registerDeserializer(EAUpdateItemAmounts);\n        this._actionFactory.registerDeserializer(EAEndGame);\n        this._actionFactory.registerDeserializer(EASetStatus);\n        this._actionFactory.registerDeserializer(EASwitch);\n        this._actionFactory.registerDeserializer(EALoop);\n        this._actionFactory.registerDeserializer(EATriggerEvents);\n        // Condition factory\n        this._conditionFactory.registerDeserializer(ECExpression);\n        this._conditionFactory.registerDeserializer(ECNot);\n        this._conditionFactory.registerDeserializer(ECAll);\n        this._conditionFactory.registerDeserializer(ECAny);\n        this._conditionFactory.registerDeserializer(ECSome);\n    }\n\n    /**\n     * Starts (or restarts) the game.\n     */\n    async start(newRandomSeed: boolean): Promise<void> {\n        if (!this._dataLoaded) {\n            await this.loadGameData();\n        }\n        this._gameState.reset(newRandomSeed);\n        this._eventEngine.enableAll();\n        await this._eventEngine.trigger('Initialization');\n    }\n\n    /**\n     * Advances one game tick.\n     */\n    async tick(): Promise<void> {\n        let endGameState = this._gameState.endGameState;\n        if (endGameState !== EndGameState.None) {\n            // Restart the game\n            if (this._gameState.playerInventory.count(\"flag\") >= 8) {\n                this._gameState.tracer.check();\n            }\n            await this.start(endGameState === EndGameState.Winning);\n            return;\n        }\n\n        this._gameState.playerStatus.tick();\n        await this._eventEngine.trigger('Tick');\n        while (this._gameState.hasPendingTrigger()) {\n            const [id, probability] = this._gameState.popPendingTrigger();\n            if (probability <= 0) continue;\n            if (probability < 1 &&\n                this._gameState.nextRandomNumber() > probability) {\n                continue;\n            }\n            await this._eventEngine.trigger(id);\n        }\n    }\n    \n}\n\nexport class GameActionProxy implements GuiActionProxy {\n\n    private _guiGame: GuiGame | undefined;\n\n    attachGui(gui: GuiGame): void {\n        this._guiGame = gui;\n    }\n\n    displayMessage(message: string, confirm: string, icon?: string, fx?: string): Promise<void> {\n        if (!this._guiGame) throw new Error('No attached GUI.');\n        return this._guiGame.displayMessage(message, confirm, icon, fx);\n    }\n\n    displayChoices(message: string, choices: Array<[string, number]>, icon?: string): Promise<number> {\n        if (!this._guiGame) throw new Error('No attached GUI.');\n        return this._guiGame.displayChoices(message, choices, icon);\n    }\n\n}\n","import * as seedrandom from 'seedrandom';\n\nimport { JSONSerializable } from './utils/jsonSerializable';\nimport { Inventory, ItemRegistry } from './effect/item';\nimport { StatusTable, StatusRegistry } from './effect/status';\nimport { PriorityQueue } from './utils/priorityQueue';\nimport { GameTracer } from './tracer';\n\nexport enum EndGameState {\n    None,\n    Winning,\n    Losing\n};\n\nexport class VariableChangedEvent {\n\n    // Indicates whether all variables are cleared.\n    clear: boolean;\n    varName: string;\n    oldValue: number | undefined;\n    newValue: number;\n\n    constructor(clear: boolean, varName: string, oldValue: number | undefined, newValue: number) {\n        this.clear = clear;\n        this.varName = varName;\n        this.oldValue = oldValue;\n        this.newValue = newValue;\n    }\n\n}\n\ntype VariableChangeHandler = (sender: GameState, event: VariableChangedEvent) => void;\n\ninterface PendingTrigger {\n    id: string;\n    priority: number;\n    order: number;\n    probability: number;\n}\n\nfunction comparePendingTrigger(a: PendingTrigger, b: PendingTrigger): boolean {\n    if (a.priority !== b.priority) return a.priority < b.priority;\n    if (a.order !== b.order) return a.order > b.order;\n    return a.id < b.id;\n}\n\nexport class GameState {\n\n    private _occurredEvents: Record<string, number> = {};\n    private _pendingTriggers: PriorityQueue<PendingTrigger>;\n    private _pendingTriggerOrder: number = 0;\n    private _playerInventory: Inventory;\n    private _playerStatus: StatusTable;\n    private _variables: Record<string, number> = {};\n    private _varLimits: Record<string, [number, number]> = {};\n    private _randomSeed: string;\n    private _random: seedrandom.StatefulPRNG<seedrandom.State.Alea>;\n    private _tracer: GameTracer;\n\n    // Public variables\n    endGameState: EndGameState = EndGameState.None;\n    // event handlers\n    onVariableChanged: VariableChangeHandler | undefined;\n\n    constructor(itemRegistry: ItemRegistry, statusRegistry: StatusRegistry,\n                randomSeed?: string) {\n        this._pendingTriggers = new PriorityQueue(comparePendingTrigger);\n        this._playerInventory = new Inventory(itemRegistry);\n        this._playerStatus = new StatusTable(statusRegistry);\n        if (randomSeed) {\n            this._randomSeed = randomSeed;\n        } else {\n            this._randomSeed = Math.random().toString().substring(2);\n        }\n        this._random = seedrandom.alea(this._randomSeed, {\n            state: true\n        });\n        this._tracer = new GameTracer(this._randomSeed);\n    }\n\n    get playerInventory(): Inventory {\n        return this._playerInventory;\n    }\n\n    get playerStatus(): StatusTable {\n        return this._playerStatus;\n    }\n\n    get occurredEvents(): { [key: string]: number; } {\n        return this._occurredEvents;\n    }\n\n    get randomSeed(): string {\n        return this._randomSeed;\n    }\n\n    get variables(): Record<string, number> {\n        return this._variables;\n    }\n\n    get tracer(): GameTracer {\n        return this._tracer;\n    }\n\n    nextRandomNumber(): number {\n        let r = this._random();\n        this._tracer.traceRandom(r);\n        return r;\n    }\n\n    /**\n     * Sets a numeric variable.\n     * @param varName Name of the variable.\n     * @param value Value.\n     * @param checkExistence Whether the existence of this variable should be\n     * checked first.\n     */\n    setVar(varName: string, value: number, checkExistence: boolean = false): void {\n        if (checkExistence && !(varName in this._variables)) {\n            throw new Error(`Variable \"${varName}\" does not exist.`);\n        }\n        if (this._varLimits[varName]) {\n            if (value > this._varLimits[varName][1]) {\n                value = this._varLimits[varName][1];\n            }\n            if (value < this._varLimits[varName][0]) {\n                value = this._varLimits[varName][0];\n            }\n        }\n        let oldValue = this._variables[varName];\n        this._variables[varName] = value;\n        if (oldValue !== value) {\n            const e = new VariableChangedEvent(false, varName, oldValue, value);\n            setTimeout(() => this.dispatchChangeEvent(e), 0)\n        }\n    }\n\n    /**\n     * Sets the lower bound and upper bound of a variable.\n     * @param varName Name of the variable.\n     * @param lb Lower bound.\n     * @param ub Upper bound.\n     */\n    setVarLimits(varName: string, lb: number, ub: number): void {\n        if (isNaN(lb)) throw new Error(\"Lower bound cannot be NaN\");\n        if (isNaN(ub)) throw new Error(\"Upper bound cannot be NaN\");\n        if (lb > ub) {\n            throw new Error('Lower bound cannot be greater than upper bound.');\n        }\n        this._varLimits[varName] = [lb, ub];\n        // Clamp the existing value if exists.\n        if (!(varName in this._variables)) return;\n        const oldValue = this._variables[varName];\n        if (oldValue < lb) {\n            this._variables[varName] = lb;\n            const e = new VariableChangedEvent(false, varName, oldValue, lb);\n            setTimeout(() => this.dispatchChangeEvent(e), 0);\n        } else if (oldValue > ub) {\n            this._variables[varName] = ub;\n            const e = new VariableChangedEvent(false, varName, oldValue, ub);\n            setTimeout(() => this.dispatchChangeEvent(e), 0);\n        }\n    }\n\n    /**\n     * Gets the lower bound and upper bound of a variable.\n     * If such bounds are not defined, [-Infinity, Infinity] will be returned.\n     * @param varName Name of the variable.\n     */\n    getVarLimits(varName: string): [number, number] {\n        let limits = this._varLimits[varName];\n        if (limits) {\n            return [limits[0], limits[1]];\n        } else {\n            return [-Infinity, Infinity];\n        }\n    }\n\n    getVar(varName: string, checkExistence: true): number;\n    getVar(varName: string, checkExistence: false): number | undefined;\n    getVar(varName: string, checkExistence: boolean = true): number | undefined {\n        let value = this._variables[varName];\n        if (value == undefined && checkExistence) {\n            throw new Error(`Variable \"${varName}\" does not exist.`);\n        }\n        return value;\n    }\n\n    /**\n     * Pushes a new pending trigger to the queue.\n     * @param triggerId Trigger id.\n     * @param probability Probability of triggering.\n     * @param priority Priority.\n     */\n    pushPendingTrigger(triggerId: string, probability: number,\n                       priority: number): void {\n        this._pendingTriggers.push({\n            'id': triggerId,\n            'priority': priority,\n            'order': this._pendingTriggerOrder++,\n            'probability': probability\n        });\n    }\n\n    /**\n     * Pops one pending trigger from the queue.\n     * @returns A pair of (trigger id, probability).\n     */\n    popPendingTrigger(): [string, number] {\n        const pendingTrigger = this._pendingTriggers.pop();\n        return [pendingTrigger.id, pendingTrigger.probability];\n    }\n\n    /**\n     * Checks if there exists any pending trigger.\n     */\n    hasPendingTrigger(): boolean {\n        return !this._pendingTriggers.empty();\n    }\n\n    /**\n     * Resets all internal states for a new game.\n     * @param newRandomSeed If true will generate a new random seed and use the\n     * new seed to reset the random number generator. Otherwise the existing\n     * random seed will be used to reset the random number generator.\n     */\n    reset(newRandomSeed: boolean): void {\n        this.playerInventory.clear();\n        this.playerStatus.clear();\n        this._occurredEvents = {};\n        this._pendingTriggers.clear();\n        this._pendingTriggerOrder = 0;\n        this.endGameState = EndGameState.None;\n        this.dispatchChangeEvent(new VariableChangedEvent(true, '', 0, 0));\n        this._variables = {};\n        if (newRandomSeed) {\n            this._randomSeed = Math.random().toString().substring(2);\n        }\n        this._random = seedrandom.alea(this._randomSeed, {\n            state: true\n        });\n    }\n\n    dumpToConsole(): void {\n        let lines: string[] = [];\n        lines.push('[Variables (Limits)]');\n        for (let varName in this._variables) {\n            const limits = this._varLimits[varName];\n            const limitsStr = limits ? ` ([${limits[0]}, ${limits[1]}])` : '';\n            lines.push(`${varName}: ${this._variables[varName]}${limitsStr}`);\n        }\n        lines.push('[Items]');\n        for (const itemId in this._playerInventory.items) {\n            lines.push(`${itemId} x${this._playerInventory.items[itemId][1]}`);\n        }\n        lines.push('[Status]');\n        for (const statusId in this._playerStatus.items) {\n            lines.push(statusId);\n        }\n        lines.push('[Occurred Events]');\n        lines.push(Object.keys(this._occurredEvents).join(', '));\n        lines.push('[Pending Triggers]');\n        if (this.hasPendingTrigger()) {\n            const top = this._pendingTriggers.top();\n            const pendingCount = this._pendingTriggers.length;\n            lines.push(`\"${top.id}\" and ${pendingCount - 1} more.`);\n        } else {\n            lines.push('None');\n        }\n        lines.push('[Seed]');\n        lines.push(this._randomSeed);\n        console.log(lines.join('\\n'));\n    }\n\n    protected dispatchChangeEvent(event: VariableChangedEvent) {\n        if (this.onVariableChanged) {\n            this.onVariableChanged(this, event);\n        }\n    }\n\n}\n","import { GameTextEngine } from './textEngine';\n\nexport class GuiBase<T extends HTMLElement> {\n\n    protected _container: T;\n    protected _textEngine: GameTextEngine;\n\n    constructor(container: T, textRenderer: GameTextEngine) {\n        this._container = container;\n        this._textEngine = textRenderer\n    }\n\n    setHidden(hidden: boolean): void {\n        this._container.style.display = hidden ? 'none' : 'block';\n    }\n\n    removeAllChildrenOf(el: HTMLElement): void {\n        while (el.firstChild) el.removeChild(el.firstChild);\n    }\n\n    createAndAddChild<T extends HTMLElement>(type: string, id?: string, className?: string): T {\n        const el = document.createElement(type);\n        if (id) el.id = id;\n        if (className) el.className = className;\n        this._container.appendChild(el);\n        // Unsafe hack.\n        return <T>el;\n    }\n\n}\n","import { GuiBase } from './guiBase';\nimport { SimpleRegistry, IDOwner } from '../utils/simpleRegistry';\nimport { EffectProviderCollection, EffectProvider, EffectProviderCollectionChangedEvent } from '../effect/effect';\nimport { Item } from '../effect/item';\nimport { GameTextEngine } from './textEngine';\nimport { Status } from '../effect/status';\n\ninterface GuiEffectProviderListDefinition {\n    title: string;\n}\n\n/**\n * Abstract base class for item list and status list.\n */\nexport abstract class GuiEffectProviderList<T extends EffectProvider> extends GuiBase<HTMLElement> {\n    \n    protected _titleContainer: HTMLHeadingElement;\n    protected _listContainer: HTMLUListElement;\n    protected _collection: EffectProviderCollection<T>;\n    protected _registry: SimpleRegistry<T>;\n\n    constructor(container: HTMLElement, textEngine: GameTextEngine,\n                collection: EffectProviderCollection<T>,\n                registry: SimpleRegistry<T>,\n                definition?: GuiEffectProviderListDefinition) {\n        super(container, textEngine);\n        this._collection = collection;\n        this._registry = registry;\n        this._titleContainer = this.createAndAddChild('h3');\n        if (definition) {\n            if (typeof definition['title'] !== 'string') {\n                throw new Error(\"Title must be a string.\");\n            }\n            this._titleContainer.innerHTML =\n                textEngine.localizeAndRender(definition.title);\n            textEngine.getLocalizationDictionary()\n                .addRequiredKey(definition.title);\n        }\n        this._listContainer = this.createAndAddChild('ul');\n        this._collection.onChanged = (collection, e) => {\n            this.renderList(collection, e);\n        };\n        // Handles item clicks.\n        this._listContainer.onclick = e => {\n            let target = e.target;\n            if (target instanceof HTMLLIElement && this.onItemClicked) {\n                this.onItemClicked(\n                    this.retrieveEffectProviderFromElement(target));\n            } \n        };\n    }\n\n    /**\n     * Specifies the callback function to handle item clicks.\n     */\n    onItemClicked?: (item: T) => void;\n\n    /**\n     * Renders the list.\n     * @param collection Effect provider collection.\n     * @param e Collection changed event.\n     */\n    abstract renderList(collection: EffectProviderCollection<T>,\n                        e: EffectProviderCollectionChangedEvent<T>): void;\n\n    /**\n     * Retrieves the effect provider instance based on the given HTML li element.\n     * @param el HTML li element.\n     */\n    abstract retrieveEffectProviderFromElement(el: HTMLElement): T;\n\n}\n\ninterface RaritySpecificStyle {\n    // Minimum rarity required to apply the style (inclusive).\n    // Defaults to -Infinity if not set.\n    minRarity?: number;\n    // Maximum rarity allowed to apply the style (inclusive).\n    // Defaults to Infinity if not set.\n    maxRarity?: number;\n    styleClasses: string[];\n}\n\nexport interface GuiItemListDefinition extends GuiEffectProviderListDefinition {\n    // Style classes to apply based on rarity. Evaluated in order.\n    raritySpecificStyles?: RaritySpecificStyle[];\n}\n\nexport class GuiItemList extends GuiEffectProviderList<Item> {\n\n    private _raritySpecificStyles: Required<RaritySpecificStyle>[] = [];\n\n    constructor(container: HTMLElement, textEngine: GameTextEngine,\n                collection: EffectProviderCollection<Item>,\n                registry: SimpleRegistry<Item>,\n                definition?: GuiItemListDefinition) {\n        super(container, textEngine, collection, registry, definition);\n        if (definition == undefined ||\n            definition['raritySpecificStyles'] == undefined) {\n            return;\n        }\n        if (!Array.isArray(definition['raritySpecificStyles'])) {\n            throw new Error('raritySpecificStyles must be an array.');\n        }\n        for (let style of definition['raritySpecificStyles']) {\n            const minRarity = style['minRarity'] == undefined\n                ? -Infinity\n                : style['minRarity'];\n            const maxRarity = style['maxRarity'] == undefined\n                ? Infinity\n                : style['maxRarity'];\n            if (!Array.isArray(style['styleClasses'])) {\n                throw new Error('styleClasses must be an array.');\n            }\n            for (const styleClass of style['styleClasses']) {\n                if (typeof styleClass !== 'string') {\n                    throw new Error(\n                        'styleClasses must be an array of strings.');\n                }\n            }\n            this._raritySpecificStyles.push({\n                minRarity: minRarity,\n                maxRarity: maxRarity,\n                styleClasses: [...style['styleClasses']]\n            });\n        }\n    }\n\n    renderList(collection: EffectProviderCollection<Item>,\n               e: EffectProviderCollectionChangedEvent<Item>): void {\n        this.removeAllChildrenOf(this._listContainer);\n        if (e.clear) return;\n        for (const itemId in collection.items) {\n            let node = document.createElement('li');\n            let [item, count] = collection.items[itemId];\n            node.setAttribute('data-item-id', item.id);\n            for (const style of this._raritySpecificStyles) {\n                if (item.rarity >= style.minRarity &&\n                    item.rarity <= style.maxRarity) {\n                    node.classList.add(...style.styleClasses);\n                }\n            }\n            const localizedItemName =\n                this._textEngine.localizeAndRender(item.unlocalizedName);\n            node.innerHTML = `${localizedItemName} x${count}`;\n            this._listContainer.appendChild(node);\n        }\n    }\n\n    retrieveEffectProviderFromElement(el: HTMLElement): Item {\n        return this._registry.get(el.getAttribute('data-item-id') || '');\n    }\n\n}\n\nexport interface GuiStatusListDefinition extends GuiEffectProviderListDefinition {}\n\nexport class GuiStatusList extends GuiEffectProviderList<Status> {\n\n    constructor(container: HTMLElement, textEngine: GameTextEngine,\n                collection: EffectProviderCollection<Status>,\n                registry: SimpleRegistry<Status>,\n                definition?: GuiStatusListDefinition) {\n        super(container, textEngine, collection, registry, definition);\n    }\n\n    renderList(collection: EffectProviderCollection<Status>,\n               e: EffectProviderCollectionChangedEvent<Status>): void {\n        this.removeAllChildrenOf(this._listContainer);\n        if (e.clear) return;\n        for (const itemId in collection.items) {\n            let node = document.createElement('li');\n            let status = collection.items[itemId];\n            node.innerHTML =\n                this._textEngine.localizeAndRender(status[0].unlocalizedName);\n            node.setAttribute('data-status-id', itemId);\n            this._listContainer.appendChild(node);\n        }\n    }\n\n    retrieveEffectProviderFromElement(el: HTMLElement): Status {\n        return this._registry.get(el.getAttribute('data-status-id') || '');\n    }\n\n}\n","import { GuiBase } from \"./guiBase\";\nimport { GuiModalBox } from \"./guiModalBox\";\nimport { GameTextEngine } from \"./textEngine\";\n\nexport interface GuiFooterLinkButtonDefinition {\n  text: string;\n  styleClasses?: string[];\n  url: string;\n}\n\nexport interface GuiFooterMessageButtonDefinition {\n  text: string;\n  styleClasses?: string[];\n  messageTitle: string;\n  message: string;\n  confirmText: string;\n  icon?: string;\n}\n\nexport interface GuiFooterDefinition {\n  // Localizable text before all buttons.\n  preamble?: string;\n  buttons: Array<GuiFooterLinkButtonDefinition | GuiFooterMessageButtonDefinition>;\n}\n\n// The footer GUI component, where help, privacy notice, copyright notice, etc.\n// are displayed.\nexport class GuiFooter extends GuiBase<HTMLElement> {\n  constructor(container: HTMLElement, textEngine: GameTextEngine,\n              modalBox: GuiModalBox, definition?: GuiFooterDefinition) {\n    super(container, textEngine);\n    this.removeAllChildrenOf(container);\n    if (!definition) return;\n    const localizer = textEngine.getLocalizationDictionary();\n    if (definition.preamble) {\n      let preamble = document.createElement('span');\n      preamble.innerHTML = textEngine.localizeAndRender(definition.preamble);\n      localizer.addRequiredKey(definition.preamble);\n      this._container.appendChild(preamble);\n    }\n    for (let i = 0; i < definition.buttons.length; i++) {\n      const buttonDef = definition.buttons[i];\n      if (i > 0) {\n        let separator = document.createElement('span');\n        separator.textContent = ' | ';\n        this._container.appendChild(separator);\n      }\n      let button = document.createElement('a');\n      button.innerHTML = textEngine.localizeAndRender(buttonDef.text);\n      localizer.addRequiredKey(buttonDef.text);\n      if ('styleClasses' in buttonDef) {\n        if (!Array.isArray(buttonDef.styleClasses)) {\n          throw new Error(\"Style classes should be an array.\");\n        }\n        for (let style of buttonDef.styleClasses) {\n          button.classList.add(style);\n        }\n      }\n      if ('url' in buttonDef) {\n        button.href = buttonDef.url;\n      } else {\n        localizer.addRequiredKey(buttonDef.messageTitle);\n        localizer.addRequiredKey(buttonDef.message);\n        localizer.addRequiredKey(buttonDef.confirmText);\n        button.onclick = (event) => {\n          event.preventDefault();\n          modalBox.display(\n              buttonDef.messageTitle,\n              buttonDef.message,\n              buttonDef.confirmText,\n              buttonDef.icon\n          );\n        };\n      }\n      this._container.appendChild(button);\n    }\n  }\n}\n","import { GuiBase } from './guiBase';\n\n/**\n * Simple particle wrapper.\n * TODO: implement a particle pool.\n */\nclass Particle {\n\n    private _el: HTMLDivElement;\n\n    x: number = 0;\n    y: number = 0;\n    vx: number = 0;\n    vy: number = 0;\n    ax: number = 0;\n    ay: number = 0;\n    active: boolean = true;\n\n    constructor(className: string) {\n        this._el = document.createElement('div');\n        this._el.className = className;\n    }\n\n    get element(): HTMLDivElement {\n        return this._el;\n    }\n\n    addToScene(scene: HTMLElement): void {\n        scene.appendChild(this._el);\n    }\n\n    removeFromScene(scene: HTMLElement): void {\n        scene.removeChild(this._el);\n    }\n\n    updatePosition(stepSize: number): void {\n        if (!this.active) return;\n        this.vx += this.ax * stepSize;\n        this.vy += this.ay * stepSize;\n        this.x += (this.vx + 0.5 * this.ax * stepSize) * stepSize;\n        this.y += (this.vy + 0.5 * this.ay * stepSize) * stepSize;\n        this._el.style.top = this.y + 'px';\n        this._el.style.left = this.x + 'px';\n    }\n\n}\n\nexport class GuiFX extends GuiBase<HTMLDivElement> {\n    \n    confetti(): void {\n        // Generate random sized divs\n        const colors = ['#f00', '#0f0', '#00f', '#ff0', '#0ff', '#f0f', '#000', '#fff'];\n        let particles: Particle[] = [];\n        let viewPortWidth = this._container.offsetWidth;\n        let viewPortHeight = document.body.offsetHeight;\n        let nActive = Math.max(30, Math.ceil(viewPortWidth / 20));\n        let lastTimestamp: number | null = null;\n        for (let i = 0;i < nActive;i++) {\n            let p = new Particle('particle_confetti');\n            p.x = Math.random() * viewPortWidth;\n            p.y = - 10 - Math.random() * 300;\n            p.vy = Math.random() * 2;\n            p.ay = 8 / 60;\n            p.element.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];\n            p.element.style.width = Math.floor(Math.random() * 6 + 4) + 'px';\n            p.element.style.height = p.element.style.width;\n            p.addToScene(this._container);\n            particles.push(p);\n        }\n        const animate: FrameRequestCallback = (timestamp) => {\n            if (!lastTimestamp) {\n                lastTimestamp = timestamp;\n            }\n            // 60 UPS\n            let stepSize = (timestamp - lastTimestamp) / (1000 / 60);\n            lastTimestamp = timestamp;\n            for (let p of particles) {\n                p.updatePosition(stepSize);\n                if (p.active && p.y > viewPortHeight * 1.5) {\n                    p.active = false;\n                    p.removeFromScene(this._container);\n                    nActive--;\n                }\n            }\n            if (nActive > 0) {\n                requestAnimationFrame(animate);\n            }\n        };\n        requestAnimationFrame(animate);\n    }\n\n}","import { GameState, VariableChangedEvent } from '../gameState';\nimport { GuiModalBox } from './guiModalBox';\nimport { GuiBase } from './guiBase';\nimport { GameEngine } from '../gameEngine';\nimport { GuiMessageWindow } from './guiMessageWindow';\nimport { GuiItemList, GuiItemListDefinition, GuiStatusList, GuiStatusListDefinition } from './guiEffectProviderList';\nimport { GuiFX } from './guiFx';\nimport { GameTextEngine } from './textEngine';\nimport { GuiFooter, GuiFooterDefinition } from './guiFooter';\nimport { GuiStatsBar, GuiStatsBarDefinition } from './guiStatsBar';\n\nexport interface GuiGameWindowDefinition {\n    statsBar?: GuiStatsBarDefinition;\n    itemList?: GuiItemListDefinition;\n    statusList?: GuiStatusListDefinition;\n    footer?: GuiFooterDefinition;\n}\n\nexport interface GuiGame {\n\n    displayMessage(message: string, confirm: string, icon?: string, fx?: string): Promise<void>;\n\n    displayChoices(message: string, choices: Array<[string, number]>, icon?: string): Promise<number>;\n\n}\n\nexport class GuiGameWindow extends GuiBase<HTMLElement> implements GuiGame {\n\n    private _statsBar: GuiStatsBar;\n    private _messageWindow: GuiMessageWindow;\n    private _modalBox: GuiModalBox;\n    private _itemList: GuiItemList;\n    private _statusList: GuiStatusList;\n    private _footer: GuiFooter;\n    private _fx: GuiFX;\n\n    private _gameEngine: GameEngine;\n\n    constructor(container: HTMLElement, textEngine: GameTextEngine,\n                gameEngine: GameEngine, definition: GuiGameWindowDefinition) {\n        super(container, textEngine);\n        this._gameEngine = gameEngine;\n        // Initialize sub-components.\n        this._statsBar = new GuiStatsBar(\n            this.retrieveElement('stats_bar'), textEngine,\n            gameEngine.expressionEngine, definition.statsBar);\n        this._messageWindow = new GuiMessageWindow(\n            this.retrieveElement('message_window'), textEngine);\n        this._modalBox = new GuiModalBox(\n            this.retrieveElement('modal_container'), textEngine);\n        this._itemList = new GuiItemList(\n            this.retrieveElement('items_window'), textEngine,\n            this._gameEngine.gameState.playerInventory,\n            this._gameEngine.itemRegistry, definition.itemList);\n        this._statusList = new GuiStatusList(\n            this.retrieveElement('status_window'), textEngine,\n            this._gameEngine.gameState.playerStatus,\n            this._gameEngine.statusRegistry, definition.statusList);\n        this._footer = new GuiFooter(\n            this.retrieveElement('footer'), textEngine, this._modalBox,\n            definition.footer);\n        this._fx = new GuiFX(\n            this.retrieveElement('fx_container'),\n            textEngine);\n        // Handlers for game state updates.\n        this._gameEngine.gameState.onVariableChanged = (gs, e) => {\n            this.handleVariableUpdate(gs, e);\n        };\n        // Event handlers for items/status list.\n        this._itemList.onItemClicked = item => {\n            this._modalBox.display(\n                item.unlocalizedName,\n                item.unlocalizedDescription,\n                'ui.ok',\n                item.icon\n            );\n        };\n        this._statusList.onItemClicked = status => {\n            this._modalBox.display(\n                status.unlocalizedName,\n                status.unlocalizedDescription,\n                'ui.ok',\n                status.icon\n            );\n        };\n    }\n\n    playFx(fx: string): void {\n        switch (fx) {\n            case 'confetti':\n                this._fx.confetti();\n                break;\n            default:\n                throw new Error(`Unknown fx \"${fx}\".`);\n        }\n    }\n\n    retrieveElement<T extends HTMLElement>(id: string): T {\n        // Lazy implementation here.\n        let el = document.getElementById(id);\n        if (!el) throw new Error(`Unable to find #${id}.`);\n        return <T>el;\n    }\n\n    handleVariableUpdate(gs: GameState, e: VariableChangedEvent): void {\n        this._statsBar.handleVariableUpdate(gs, e);\n    }\n\n    displayMessage(message: string, confirm: string, icon?: string, fx?: string): Promise<void> {\n        if (fx) this.playFx(fx);\n        return this._messageWindow.displayMessage(message, confirm, icon);\n    }\n\n    displayChoices(message: string, choices: Array<[string, number]>, icon?: string): Promise<number> {\n        return this._messageWindow.displayChoices(message, choices, icon);\n    }\n\n}\n","import { GuiBase } from './guiBase';\nimport { GameTextEngine } from './textEngine';\n\n// https://en.wikipedia.org/wiki/Unicode_block\nconst CJK_SCRIPTS = [\n    \"\\\\p{Script=Han}\",\n    \"\\\\p{Script=Bopomofo}\",\n    \"\\\\p{Script=Katakana}\",\n    \"\\\\p{Script=Hiragana}\",\n    \"\\\\p{Script=Hangul}\",\n];\nconst CJK_REGEXP = new RegExp(`^[${CJK_SCRIPTS.join('')}]\\$`, 'u');\n\nfunction segmentMessage(message: string): string[] {\n    const segments: string[] = [];\n    let idx = 0;\n    let lastIdx = 0;\n    while (idx < message.length) {\n        const currentChar = message[idx];\n        if (currentChar === ' ') {\n            // Consume all white spaces\n            ++idx;\n            while (idx < message.length && message[idx] === ' ');\n            segments.push(message.substring(lastIdx, idx));\n            lastIdx = idx;\n        } else if (CJK_REGEXP.test(currentChar)) {\n            // Currently only support CJK characters\n            ++idx;\n            segments.push(message.substring(lastIdx, idx));\n            lastIdx = idx;\n        } else {\n            ++idx;\n        }\n    }\n    if (lastIdx < idx) {\n        segments.push(message.substring(lastIdx, idx));\n    }\n    return segments;\n}\n\nexport class GuiMessageWindow extends GuiBase<HTMLDivElement> {\n\n    private _messageContainer: HTMLDivElement;\n    private _choicesContainer: HTMLDivElement;\n    private _animate: boolean = true;\n\n    /**\n     * Creates a message window.\n     * @param container Container element.\n     * @param textEngine HTML text renderer.\n     */\n    constructor(container: HTMLDivElement, textEngine: GameTextEngine) {\n        super(container, textEngine);\n        this._messageContainer = this.createAndAddChild('div', '', 'message_container');\n        this._choicesContainer = this.createAndAddChild('div', '', 'choices_container');\n    }\n\n    async displayMessage(message: string, confirm: string, icon?: string): Promise<void> {\n        if (this._animate) {\n            await this.typewriteMessage(message, icon);\n        } else {\n            this.updateMessage(message, icon);\n        }\n        return new Promise<void>(resolve => {\n            const btnConfirm = document.createElement('a');\n            btnConfirm.className = 'btn';\n            btnConfirm.href = 'javascript: void(0)';\n            btnConfirm.innerHTML = this._textEngine.localizeAndRender(confirm);\n            this._choicesContainer.appendChild(btnConfirm);\n            btnConfirm.onclick = () => {\n                this._messageContainer.textContent = '';\n                btnConfirm.onclick = null;\n                btnConfirm.remove();\n                resolve();        \n            }\n        });\n    }\n\n    async displayChoices(message: string, choices: Array<[string, number]>, icon?: string): Promise<number> {\n        if (this._animate) {\n            await this.typewriteMessage(message, icon);\n        } else {\n            this.updateMessage(message, icon);\n        }\n        return new Promise<number>(resolve => {\n            let choiceButtons : HTMLAnchorElement[] = [];\n            for (let i = 0;i < choices.length;i++) {\n                let btn = document.createElement('a');\n                let [choiceMessage, choiceId] = choices[i];\n                btn.className = 'btn';\n                // Allow styled text in the buttons.\n                btn.innerHTML = this._textEngine.localizeAndRender(choiceMessage);\n                btn.href = 'javascript: void(0);';\n                btn.setAttribute('data-choice-number', choiceId.toString());\n                btn.onclick = () => {\n                    this._messageContainer.textContent = '';\n                    for (btn of choiceButtons) btn.remove();\n                    resolve(choiceId);\n                };\n                choiceButtons.push(btn);\n                this._choicesContainer.appendChild(btn);\n            }\n        });\n    }\n\n    updateMessage(message: string, icon?: string): void {\n        let html = `<p>${this._textEngine.localizeAndRender(message)}</p>`;\n        if (icon) {\n            html += `<p><img src=\"${icon}\" /></p>`;\n        }\n        this._messageContainer.innerHTML = html;\n    }\n\n    typewriteMessage(message: string, icon?: string): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.removeAllChildrenOf(this._messageContainer);\n            let pText = document.createElement('p');\n            this._messageContainer.appendChild(pText);\n            let segments = segmentMessage(this._textEngine.localize(message));\n            let curText = '';\n            let lastStep = 0;\n            let startingTimestamp : number | null = null;\n            let callback: FrameRequestCallback = (timestamp) => {\n                if (!startingTimestamp) {\n                    startingTimestamp = timestamp;\n                }\n                const elapsedTime = timestamp - startingTimestamp;\n                // 30 FPS\n                const steps = Math.min(elapsedTime / 33.3333, segments.length);\n                while (lastStep < steps) {\n                    curText += segments[lastStep];\n                    ++lastStep;\n                }\n                pText.innerHTML = this._textEngine.render(curText);\n                if (lastStep === segments.length) {\n                    // Finished!\n                    if (icon) {\n                        let pIcon = document.createElement('p');\n                        let img = document.createElement('img');\n                        img.src = icon;\n                        pIcon.appendChild(img);\n                        this._messageContainer.appendChild(pIcon);\n                    }\n                    resolve();\n                } else {\n                    requestAnimationFrame(callback);\n                }\n            };\n            requestAnimationFrame(callback);\n        });\n    }\n}","import { GuiBase } from './guiBase';\nimport { GameTextEngine } from './textEngine';\n\ninterface PendingMessage {\n    title: string;\n    message: string;\n    confirm: string;\n    icon?: string;\n}\n\nexport class GuiModalBox extends GuiBase<HTMLDivElement> {\n\n    private _contentBox: HTMLDivElement;\n    private _titleContainer: HTMLHeadingElement;\n    private _messageContainer: HTMLDivElement;\n    private _confirmBtn: HTMLAnchorElement;\n\n    private _pending: Array<PendingMessage> = [];\n    private _shown: boolean = false;\n\n    constructor(container: HTMLDivElement, textEngine: GameTextEngine) {\n        super(container, textEngine);\n        // Init components.\n        this._contentBox = this.createAndAddChild('div', '', 'modal_content');\n        this._titleContainer = document.createElement('h3');\n        this._messageContainer = document.createElement('div');\n        this._messageContainer.className = 'modal_message';\n        this._confirmBtn = document.createElement('a');\n        this._confirmBtn.className = 'btn_confirm btn';\n        this._confirmBtn.href = 'javascript:void(0)';\n        this._contentBox.appendChild(this._titleContainer);\n        this._contentBox.appendChild(this._messageContainer);\n        this._contentBox.appendChild(this._confirmBtn);\n        this._confirmBtn.onclick = () => {\n            if (this._pending.length > 0) {\n                const m = <PendingMessage>this._pending.shift();\n                this._setContent(m.title, m.message, m.confirm, m.icon);\n            } else {\n                this.setHidden(true);\n                this._clearContent();\n            }\n        };\n    }\n\n    /**\n     * Displays a message.\n     * @param title Title.\n     * @param message Message.\n     * @param confirm Text for the confirm button.\n     * @param icon (Optional) Path to the icon file (image file).\n     */\n    display(title: string, message: string, confirm: string, icon?: string): void {\n        if (this._shown) {\n            this._pending.push({\n                title: this._textEngine.localizeAndRender(title),\n                message: this._textEngine.localizeAndRender(message),\n                confirm: this._textEngine.localizeAndRender(confirm),\n                icon: icon\n            });\n        } else {\n            this._setContent(\n                this._textEngine.localizeAndRender(title),\n                this._textEngine.localizeAndRender(message),\n                this._textEngine.localizeAndRender(confirm),\n                icon\n            );\n            this.setHidden(false);\n        }\n    }\n\n    private _setContent(title: string, message: string, confirm: string, icon?: string): void {\n        this._titleContainer.textContent = title;\n        const p = document.createElement('p');\n        p.innerHTML = message;\n        this._messageContainer.appendChild(p);\n        if (icon) {\n            const img = document.createElement('img');\n            img.src = icon;\n            this._messageContainer.appendChild(img);\n        }\n        this._confirmBtn.textContent = confirm;\n    }\n\n    private _clearContent(): void {\n        this._titleContainer.textContent = '';\n        this._messageContainer.innerHTML = '';\n        this._confirmBtn.textContent = '';\n    }\n\n}\n","import { CompiledEventExpression, EventExpressionCompiler, EventExpressionEngine, EventExpressionEvaluator } from '../event/expression';\nimport { GameState, VariableChangedEvent } from '../gameState';\nimport { GuiBase } from './guiBase';\nimport { GameTextEngine } from './textEngine';\n\nexport interface GuiStatsBarItemUpdateTrigger {\n  variables: string[];\n}\n\nexport interface GuiStatsBarItemConditionalStyle {\n  // An expression string that can be compiled by `EventExpressionCompiler`.\n  // You can use the same conditions defined in `GameEvent` here.\n  condition: string;\n  // List of classes to be applied to the stats bar item when the condition is\n  // met. If unset or empty, it effectively removes all classes.\n  styleClasses?: string[];\n}\n\nexport interface GuiStatsBarItemDefinition {\n  // Localizible text to be displayed.\n  text: string;\n  // Determines if the item shows on the left or the right side.\n  side?: 'left' | 'right';\n  // If the rendering of `text` depends on any `GameState` variables, they need\n  // to listed here to the stats display can be updated properly once the\n  // variables change.\n  updateTrigger?: GuiStatsBarItemUpdateTrigger;\n  // Optional list of conditional styles to be applied. If multiple conditions\n  // are met, only the styles associated with the first one will be applied.\n  // If none of the conditions are met, a default style (no class) will be\n  // applied.\n  conditionalStyles?: GuiStatsBarItemConditionalStyle[];\n}\n\nexport interface GuiStatsBarDefinition {\n  items?: GuiStatsBarItemDefinition[];\n}\n\ninterface CompiledConditionalStyle {\n  conditionExpression: CompiledEventExpression;\n  classNames: string[];\n}\n\nclass GuiStatsBarItem {\n\n  private _container: HTMLElement;\n  private _text: string;\n  private _conditionalStyles: CompiledConditionalStyle[] = [];\n\n  constructor(container: HTMLElement, exprCompiler: EventExpressionCompiler,\n              definition: GuiStatsBarItemDefinition) {\n    this._container = container;\n    this._text = definition.text;\n    if (definition.conditionalStyles) {\n      for (const style of definition.conditionalStyles) {\n        this._conditionalStyles.push({\n          conditionExpression: exprCompiler.compile(style.condition),\n          classNames: style.styleClasses ? [...style.styleClasses] : []\n        });\n      }\n    }\n  }\n\n  update(textEngine: GameTextEngine, ee: EventExpressionEvaluator) {\n    this._container.innerHTML = textEngine.localizeAndRender(this._text);\n    let conditionMet = false;\n    for (const style of this._conditionalStyles) {\n      if (!!ee.eval(style.conditionExpression)) {\n        this._container.className = style.classNames.join(' ');\n        conditionMet = true;\n        break;\n      }\n    }\n    if (!conditionMet) {\n      this._container.className = '';\n    }\n  }\n  \n}\n\n// Displays various player stats at the very top of the screen.\nexport class GuiStatsBar extends GuiBase<HTMLElement> {\n\n  private _itemsByTriggeringVariable: Record<string, GuiStatsBarItem[]> = {};\n  private _expressionEvaluator: EventExpressionEvaluator;\n\n  constructor(container: HTMLElement, textEngine: GameTextEngine,\n              expressionEngine: EventExpressionEngine,\n              definition?: GuiStatsBarDefinition) {\n    super(container, textEngine);\n    this._expressionEvaluator = expressionEngine;\n    if (!definition || !definition.items) return;\n    const leftContainer = this.createAndAddChild('div', 'stats_left');\n    const rightContainer = this.createAndAddChild('div', 'stats_right');\n    for (const itemDef of definition.items) {\n      textEngine.getLocalizationDictionary().addRequiredKey(itemDef.text);\n      const itemContainer = document.createElement('p');\n      const item = new GuiStatsBarItem(itemContainer, expressionEngine,\n                                       itemDef);\n      if (!itemDef.side || itemDef.side === 'left') {\n        leftContainer.appendChild(itemContainer);\n      } else if (itemDef.side === 'right') {\n        rightContainer.appendChild(itemContainer);\n      } else {\n        throw new Error(`Unknown side: ${itemDef.side}.`);\n      }\n      if (itemDef.updateTrigger) {\n        for (const varName of itemDef.updateTrigger.variables) {\n          if (varName in this._itemsByTriggeringVariable) {\n            this._itemsByTriggeringVariable[varName].push(item);\n          } else {\n            this._itemsByTriggeringVariable[varName] = [item];\n          }\n        }\n      }\n    }\n  }\n\n  handleVariableUpdate(gs: GameState, e: VariableChangedEvent): void {\n    if (e.clear) return;\n    if (e.varName in this._itemsByTriggeringVariable) {\n      for (const item of this._itemsByTriggeringVariable[e.varName]) {\n        item.update(this._textEngine, this._expressionEvaluator);\n      }\n    }\n  }\n}","import { LocalizationDictionary } from '../i18n/localization';\nimport { GameState } from '../gameState';\nimport { isVariableName } from '../utils/expression';\n\nexport interface GameTextEngine {\n    /**\n     * Renders the source text into HTML text.\n     * Pipeline: original string -> variable interpolation + styling\n     * Formats:\n     * * {{varName:ndigits}} Game state variable interpolation, number of\n     *                       digits is optional.\n     * * {{@specialVarName}} Special variable interpolation. See\n     *                       `_evalSpecialVariable()` for more details.\n     * * __text__ underline\n     * * **text** emphasize\n     * * ##text## strong\n     * * ``text`` vertabim, no additional style modifier allowed inside.\n     *            Variable interpolation still applies inside.\n     * For example, if player.hope is 50, then \"Hope: <**{{player.hope}}**>\" will be\n     * converted to \"Hope: &lt;<em>50</em>&gt;\".\n     * @param src Source text.\n     */\n    render(src: string): string;\n\n    /**\n     * Localizes and then renders the source text into HTML text.\n     * @param src Source text.\n     */\n    localizeAndRender(src: string): string;\n\n    /**\n     * Only localizes the source text.\n     * @param src Source text.\n     */\n    localize(src: string): string;\n\n    /**\n     * Gets the underlying localization dictionary.\n     */\n    getLocalizationDictionary(): LocalizationDictionary;\n}\n\nexport class SimpleGameTextEngine implements GameTextEngine {\n    \n    constructor(private _ldict: LocalizationDictionary, private _gs: GameState) {\n\n    }\n\n    render(src: string): string {\n        // Step 1: interpolate\n        src = src.replace(/\\{\\{(@?[a-z0-9$_.]+)(:\\d+)?\\}\\}/gi, (match, p1, p2) => {\n            if (p1[0] === '@') {\n                // Special variables\n                let specialVarName = p1.substring(1);\n                return this._evalSpecialVariable(specialVarName) || match;\n            } else if (isVariableName(p1)) {\n                // Game state variables\n                let val = this._gs.getVar(p1, false);\n                if (val == undefined) {\n                    return match;\n                }\n                if (p2 == undefined) {\n                    return val.toString();\n                } else {\n                    return val.toFixed(parseInt(p2.slice(1)));\n                }\n            } else {\n                return match;\n            }\n        });\n        // Step 2: Escape\n        src = escapeHTML(src);\n        // Step 3: Add style\n        return renderWithStyle(src);\n    }\n    \n    localizeAndRender(src: string): string {\n        return this.render(this.localize(src));\n    }\n    \n    localize(src: string): string {\n        return this._ldict.translate(src);\n    }\n\n    getLocalizationDictionary(): LocalizationDictionary {\n        return this._ldict;\n    }\n\n    private _evalSpecialVariable(varName: string): string | undefined {\n        if (!isVariableName(varName)) {\n            return undefined;\n        }\n        switch (varName) {\n            case 'seed':\n                return this._gs.randomSeed;\n            case 'seedUrl':\n                let path = window.location.protocol + '//' + \n                           window.location.host + window.location.pathname;\n                let encodedSeed = encodeURIComponent(this._gs.randomSeed)\n                return `${path}#init_seed=${encodedSeed}`;\n            default:\n                return undefined;\n        }\n    }\n}\n\nconst TextStyleMarkupMap: { [key: string]: [string, string]; } = {\n    '*': ['<em>', '</em>'],\n    '#': ['<strong>', '</strong>'],\n    '_': ['<span style=\"text-decoration: underline\">', '</span>'],\n    '`': ['<code>', '</code>']\n};\n\nfunction escapeHTML(s: string): string {\n    return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nfunction renderWithStyle(s: string): string {\n    // Split into segments and render.\n    let stack: string[] = [];\n    let result = '';\n    let idx = 0;\n    let lastIdx = 0;\n    while (idx < s.length) {\n        if (!(s[idx] in TextStyleMarkupMap)) {\n            ++idx;   \n            continue;\n        }\n        // Must repeat once and not inside a code block\n        let curChar = s[idx];\n        if (idx + 1 < s.length && s[idx + 1] === curChar) {\n            if (idx > lastIdx) {\n                result += s.substring(lastIdx, idx);\n            }\n            let markupConsumed = false;\n            if (stack.length > 0 && curChar === stack[stack.length - 1]) {\n                // Closing\n                stack.pop();\n                result += TextStyleMarkupMap[curChar][1];\n                markupConsumed = true;\n            } else if (stack.length === 0 || stack[stack.length - 1] !== '`') {\n                // Opening\n                stack.push(s[idx]);\n                result += TextStyleMarkupMap[curChar][0];\n                markupConsumed = true;\n            }\n            idx += 2;\n            if (markupConsumed) {\n                lastIdx = idx;\n            }\n        } else {\n            ++idx;\n        }\n    }\n    // Last segment.\n    if (idx > lastIdx) {\n        result += s.substring(lastIdx, idx);\n    }\n    // Auto closing\n    while (stack.length > 0) {\n        result += TextStyleMarkupMap[<string>stack.pop()][1];\n    }\n    return result;\n}\n","import { downloadAndParse } from \"../utils/network\";\nimport { load as loadYaml } from \"js-yaml\";\n\nexport class LocalizationDictionary {\n    \n    private _dict: Map<string, string> = new Map();\n    private _requiredTranslationKeys: Set<string> = new Set();\n\n    addTranslation(translationKey: string, translation: string): void {\n        this._dict.set(translationKey, translation);\n    }\n\n    addRequiredKey(translationKey: string): void {\n        this._requiredTranslationKeys.add(translationKey);\n    }\n\n    translate(translationKey: string): string {\n        const translation = this._dict.get(translationKey)\n        return translation == undefined ? translationKey : translation;\n    }\n\n    /**\n     * Dumps keys of missing translations as a list, in lexicographical order.\n     */\n    dumpMissingTranslationKeys(): string[] {\n        let missingKeys: string[] = [];\n        for (const requiredKey of this._requiredTranslationKeys) {\n            if (!this._dict.has(requiredKey)) {\n                missingKeys.push(requiredKey);\n            }\n        }\n        missingKeys.sort();\n        return missingKeys;\n    }\n\n    /**\n     * Dumps all keys of required translations as a list, in lexicographical\n     * order.\n     */\n    dumpRequiredTranslationKeys(): string[] {\n        let requiredKeys = [...this._requiredTranslationKeys];\n        requiredKeys.sort();\n        return requiredKeys;\n    }\n\n    /**\n     * Dumps all keys with translations but are not required as a list, in\n     * lexicographical order.\n     */\n    dumpUnnecessaryTranslationKeys(): string[] {\n        let unnecessaryKeys: string[] = [];\n        for (const key of this._dict.keys()) {\n            if (!this._requiredTranslationKeys.has(key)) {\n                unnecessaryKeys.push(key);\n            }\n        }\n        unnecessaryKeys.sort();\n        return unnecessaryKeys;\n    }\n\n    async loadFrom(url: string): Promise<void> {\n        let obj: any = await downloadAndParse(url, loadYaml);\n        if (obj == undefined) {\n            throw new Error(`Failed to load translation file from: ${url}`);\n        }\n        let nTranslations = 0;\n        for (let translationKey in obj) {\n            const translation = obj[translationKey];\n            if (typeof translation !== 'string') {\n                throw new Error(\n                    `Translation of \"${translationKey}\" should be a string.`);\n            }\n            this.addTranslation(translationKey, translation);\n            ++nTranslations;\n        }\n        console.log(`Successfully loaded ${nTranslations} translations.`);\n    }\n\n}\n","export class GameTracer {\n\n    private _initSeed: string;\n    private _randomNumbers: Array<number> = [];\n    private _occuredEvents: Array<string> = [];\n    private _executedActions: Array<[string, Array<number>]> = [];\n    private _traces: Array<[string, [string, Array<number>]]> = [];\n\n    constructor(randomSeed: string) {\n        this._initSeed = randomSeed;\n    }\n\n    get initSeed(): string {\n        return this._initSeed;\n    }\n\n    get randomNumbers(): Array<number> {\n        return this._randomNumbers;\n    }\n\n    get occuredEvents(): Array<string> {\n        return this.occuredEvents;\n    }\n\n    get executedActions(): Array<[string, Array<number>]> {\n        return this._executedActions;\n    }\n\n    traceRandom(r: number): void {\n        if (r === undefined || r === null)\n            return\n        this._randomNumbers.push(r);\n    }\n\n    traceEvent(e: string): void {\n        if (e === undefined || e === null)\n            return\n        this._occuredEvents.push(e);\n        this._traces.push(['event', [e, []]])\n    }\n\n    traceAction(a: [string, Array<number>]): void {\n        if (a === undefined || a === null)\n            return\n        this._executedActions.push(a);\n        this._traces.push(['action', a])\n    }\n\n    reset(newRandomSeed: string): void {\n        this._initSeed = newRandomSeed;\n        this._randomNumbers = [];\n        this._occuredEvents = [];\n        this._executedActions = [];\n        this._traces = [];\n    }\n\n    async check(): Promise<void> {\n        // submit all data to remote\n        let json = JSON.stringify({\n            \"randomseed\": this._initSeed,\n            \"randoms\": this._randomNumbers,\n            'traces': this._traces\n        })\n\n        fetch(\"/api/verify\", {\n            method: 'POST',\n            body: json,\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        }).then(data => {\n            data.text().then(a => {\n                console.log(a);\n            });\n        })\n    }\n}","/**\n * A simple set builder that helps easily combine sets.\n */\nexport class SetBuilder<T> {\n  \n  constructor(private _set: Set<T> = new Set(),\n              private _built: boolean = false) {}\n\n  /**\n   * Adds one or more elements to the set. Can no longer be called after\n   * calling `get()`.\n   * @param inputs An element or an array of elements.\n   */\n  add(...inputs: (T | T[] | Set<T>)[]): void {\n    if (this._built) {\n      throw new Error('Cannot add element(s) after the set is built!');\n    }\n    for (let input of inputs) {\n      if (Array.isArray(input) || input instanceof Set) {\n        for (let element of input) {\n          this._set.add(element);\n        }\n      } else {\n        this._set.add(input);\n      }\n    }\n  }\n\n  /**\n   * Gets the built set.\n   */\n  get(): Set<T> {\n    this._built = true;\n    return this._set;\n  }\n\n}\n","/**\n * A simple expression evaluation system for checking conditions, updating\n * weights, or changing variables using events.\n */\n\n/**\n * Represents the type of a token.\n */\nenum TokenType {\n    Name,\n    Number,\n    Boolean,\n    String,\n    Operator,\n    Delimiter,\n    Whitespace // We do not store whitespace tokens.\n}\n\n/**\n * Represents a token object.\n */\ninterface Token {\n    text: string;\n    type: TokenType;\n}\n\n/**\n * Regular expressions for different tokens.\n */\nconst regexGroups = [\n    {\n        tokenType: TokenType.Whitespace,\n        regex: /^\\s+/g\n    },\n    {\n        tokenType: TokenType.Boolean,\n        regex: /^true|^false/\n    },\n    {\n        tokenType: TokenType.Name,\n        regex: /^[a-z_$][a-z0-9_$]*(\\.[a-z_$][a-z0-9_$]*)*/i\n    },\n    {\n        tokenType: TokenType.Number,\n        regex: /^[+-]?Infinity|^NaN|^(\\d+(\\.\\d+)?([Ee][+-]?\\d+)?)/\n    },\n    {\n        tokenType: TokenType.String,\n        regex: /^'(\\\\['\\\\]|[^'])*'/\n    },\n    {\n        tokenType: TokenType.Operator,\n        regex: /^(\\+|-|\\*|\\/|%|\\(|\\)|>=|>|<=|<|&&|&|\\|\\||\\||!|:|\\?|===|==|!==|!=)/\n    },\n    {\n        tokenType: TokenType.Delimiter,\n        regex: /^,/\n    }\n];\n\nexport function isVariableName(s: string): boolean {\n    return /^[a-z_$][a-z0-9_$]*(\\.[a-z_$][a-z0-9_$]*)*$/i.test(s);\n}\n\n/**\n * Tokenizes a simple expression.\n * @param expr String representation of the simple expression.\n */\nfunction tokenize(expr: string): Token[] {\n    let idx = 0;\n    let tokens: Token[] = [];\n    while (expr.length > 0) {\n        let matched = false;\n        for (let g of regexGroups) {\n            let match = g.regex.exec(expr);\n            if (match) {\n                matched = true;\n                if (g.tokenType !== TokenType.Whitespace) {\n                    tokens.push({\n                        type: g.tokenType,\n                        text: match[0]\n                    });\n                }\n                expr = expr.slice(match[0].length);\n                break;\n            }\n        }\n        if (!matched) {\n            throw new Error(`Invalid syntax starting at: ${expr}`);\n        }\n    }\n    return tokens;\n}\n\n/**\n * Consists of the available functions when evaluating the expressions.\n * These functions should NOT depend on this.\n */\nexport interface FunctionTable {\n    /**\n     * Retrieves the numerical value of a game variable.\n     * This function must be implemented.\n     * @param varName Name of the variable.\n     */\n    getVar(varName: string): number;\n\n    /**\n     * Other optional functions.\n     */\n    [fname: string]: Function;\n}\n\nexport interface FunctionTableProvider<T extends FunctionTable> {\n    /**\n     * Returns a \"dictionary\" of functions where none of the functions should\n     * depend of `this`. These functions will be made available when evaluating\n     * simple expressions.\n     */\n    getClosure(): T;\n    /**\n     * Checks if the specified function name exists.\n     */\n    existsFunction(fname: string): boolean;\n}\n\nexport interface CompiledExpression<T extends FunctionTable> {\n    /**\n     * Retrieves the source code for this expression.\n     */\n    readonly source: string;\n\n    /**\n     * Compiled function.\n     * @param fTable Function table.\n     */\n    fn(fTable: T): number; \n}\n\nexport interface ExpressionEvaluator<T extends FunctionTable> {\n\n    eval(expr: CompiledExpression<T>): number;\n\n}\n\nexport interface ExpressionCompiler<T extends FunctionTable> {\n\n    /**\n     * Converts a string or a number of a compiled expression.\n     * @param expr Expression.\n     */\n    compile(expr: string | number): CompiledExpression<T>;\n\n}\n\n/**\n * Compiles a simple expression into a JavaScript function.\n * A simple expression consists of:\n *  Names: year, player.hope, ...\n *         a-z, 0-9, $_., all segments cannot start with 0-9\n *  Numbers: 12, -1.3, 1e-8, Infinity, -Infinity, NaN, ...\n *  Strings: 'hello', 'a\\nb', ...\n *  Operators: +, -, *, /, (, ), ...\n *  White spaces\n * This compiler will simply replace variable names with proper JavaScript\n * accessors (e.g., `player.hope` -> `__functions.getVar('player.hope')`),\n * and function names with proper function calls (e.g., `hasItem` ->\n * `__functions.hasItem`), and then let JavaScript compiles the functions.\n * For instance, the following expression\n *  hasItem('idea') ? player.hope + 1 : 0\n * will be converted to\n *  __functions.has('idea') ? __functions.getVar('player.hope') + 1 : 0;\n * @param expr String representation of the simple expression.\n */\nexport function compileExpression<T extends FunctionTable>(expr: string, fp: FunctionTableProvider<T>): CompiledExpression<T> {\n    const tokens = tokenize(expr);\n    let funcBody = '\"use strict\";\\nreturn (';\n    let idx = 0;\n    while (idx < tokens.length) {\n        const curToken = tokens[idx];\n        switch (curToken.type) {\n            case TokenType.Name:\n                if (curToken.text.indexOf('.') > 0 || idx >= tokens.length - 2 || tokens[idx + 1].type !== TokenType.Operator || tokens[idx + 1].text !== '(') {\n                    // Normal variable.\n                    funcBody += `__functions.getVar('${curToken.text}')`;\n                } else {\n                    // Function call.\n                    if (fp.existsFunction(curToken.text)) {\n                        funcBody += `__functions.` + curToken.text;                        \n                    } else {\n                        throw new Error(`Unsupported function \"${curToken.text}\".`);\n                    }\n                }\n                break;\n            case TokenType.Number:\n            case TokenType.Boolean:\n            case TokenType.Operator:\n            case TokenType.String:\n            case TokenType.Delimiter:\n                funcBody += curToken.text;\n                break;\n            default:\n                throw new Error('Unexpected token type.');\n        }\n        ++idx;\n    }\n    funcBody += ');'\n    let fn = new Function('__functions', funcBody);\n    return {\n        source: expr,\n        fn: <(fc: T) => number>fn\n    };\n}\n\n","/**\n * Retrieves and parses a text file asynchronously.\n * @param url URL of the text file.\n * @param parser Text parser.\n */\nexport async function downloadAndParse<T>(url: string, parser: (s: string) => T): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.onreadystatechange = () => {\n            if (request.readyState == XMLHttpRequest.DONE) {\n                if (request.status == 200){\n                    resolve(parser(request.responseText));                    \n                } else {\n                    reject(new Error('Error status: ' + request.statusText));\n                }\n            }\n        };\n        request.send();\n    });\n}\n","// Returns true if a < b.\ntype LessComparator<T> = (a: T, b: T) => boolean;\n\n/**\n * Simple max binary heap based priority queue using weak ordering.\n * \n * Notes:\n * \n * 1. Pop ordering of equal elements is unspecified.\n * 2. Mutations to elements in the queue will lead to unexpected behavior when\n *    such mutations affect ordering.\n */\nexport class PriorityQueue<T> {\n\n  private _comparator: LessComparator<T>;\n  private _data: T[] = [];\n\n  /**\n   * Constructs a new priority queue. Optionally with a custom comparator.\n   * @param comparator If not specified will use JavaScript's \"<\".\n   */\n  constructor(comparator?: LessComparator<T>) {\n    if (comparator) {\n      this._comparator = comparator;\n    } else {\n      this._comparator = (a, b) => a < b;\n    }\n  }\n\n  /**\n   * Gets the number of elements in the queue.\n   */\n  get length(): number {\n    return this._data.length;\n  }\n\n  /**\n   * Checks if the queue is empty.\n   */\n  public empty(): boolean {\n    return this._data.length === 0;\n  }\n\n  /**\n   * Adds a new element to the queue.\n   * @param element \n   */\n  public push(element: T): void {\n    this._data.push(element);\n    this._heapUp(this._data.length - 1);\n  }\n\n  /**\n   * Removes the top element from the queue, and returns it.\n   */\n  public pop(): T {\n    if (this._data.length === 0) {\n      throw new Error('Cannot pop from an empty queue.');\n    }\n    const top = this._data[0];\n    if (this._data.length === 1) {\n      this._data.pop();\n      return top;\n    }\n    this._swap(0, this._data.length - 1);\n    this._data.pop();\n    this._heapDown(0);\n    return top;\n  }\n\n  /**\n   * Accesses the top element without removing it from the queue.\n   */\n  public top(): T {\n    if (this._data.length === 0) {\n      throw new Error('Cannot access the top element of an empty queue.');\n    }\n    return this._data[0];\n  }\n\n  /**\n   * Remove all elements from the queue.\n   */\n  public clear(): void {\n    this._data = [];\n  }\n\n  private _swap(i: number, j: number): void {\n    const temp = this._data[i];\n    this._data[i] = this._data[j];\n    this._data[j] = temp;\n  }\n\n  private _heapUp(i: number): void {\n    if (i === 0) return;\n    while (i > 0) {\n      const parent = (i - 1) >> 1;\n      if (this._comparator(this._data[parent], this._data[i])) {\n        this._swap(parent, i);\n      } else {\n        break;\n      }\n      i = parent;\n    }\n  }\n\n  private _heapDown(i: number): void {\n    if (this._data.length <= 1) return;\n    while (i < this._data.length) {\n      const right = (i + 1) << 1;\n      const left = right - 1;\n      if (right >= this._data.length) {\n        if (this._comparator(this._data[i], this._data[left])) {\n          this._swap(i, left);\n          i = left;\n        } else {\n          break;\n        }\n      } else {\n        const maxChild =\n          this._comparator(this._data[left], this._data[right]) ? right : left;\n        if (this._comparator(this._data[i], this._data[maxChild])) {\n          this._swap(i, maxChild);\n          i = maxChild;\n        } else {\n          break;\n        }\n      }\n    }\n  }\n\n}","/**\n * Samples a integer from [0, w.length) according to the weights defined by w.\n * @param w Array of weights.\n */\nexport function weightedSample(w: ArrayLike<number>,\n                               random: number): number {\n    if (w.length === 0) throw new Error('Must have at least one weight value.');\n    let cw: number[] = new Array(w.length + 1);\n    let sum = 0;\n    for (let i = 0;i < w.length;i++)\n    {\n        cw[i] = sum;\n        if (w[i] < 0) throw new Error('Weights cannot be negative.');\n        sum += w[i];\n    }\n    cw[cw.length - 1] = sum;\n    if (sum === 0) throw new Error('Sum of weights must be positive.');\n    let p = random * sum;\n    // Should use binary search here!\n    let idx = 0;\n    for (;idx < w.length;idx++) {\n        if (p >= cw[idx] && p < cw[idx + 1]) {\n            break;\n        }\n    }\n    return idx;\n}\n","const token = '%[a-f0-9]{2}';\nconst singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nconst multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tconst left = components.slice(0, split);\n\tconst right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch {\n\t\tlet tokens = input.match(singleMatcher) || [];\n\n\t\tfor (let i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tconst replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD',\n\t};\n\n\tlet match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch {\n\t\t\tconst result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tconst entries = Object.keys(replaceMap);\n\n\tfor (const key of entries) {\n\t\t// Replace all decoded components\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nexport default function decodeUriComponent(encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n}\n","export function includeKeys(object, predicate) {\n\tconst result = {};\n\n\tif (Array.isArray(predicate)) {\n\t\tfor (const key of predicate) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor?.enumerable) {\n\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// `Reflect.ownKeys()` is required to retrieve symbol properties\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor.enumerable) {\n\t\t\t\tconst value = object[key];\n\t\t\t\tif (predicate(key, value, object)) {\n\t\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function excludeKeys(object, predicate) {\n\tif (Array.isArray(predicate)) {\n\t\tconst set = new Set(predicate);\n\t\treturn includeKeys(object, key => !set.has(key));\n\t}\n\n\treturn includeKeys(object, (key, value, object) => !predicate(key, value, object));\n}\n","\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    // used for this specific key only because Object.defineProperty is slow\n    if (keyNode === '__proto__') {\n      Object.defineProperty(_result, keyNode, {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: valueNode\n      });\n    } else {\n      _result[keyNode] = valueNode;\n    }\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isnt mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out   ns-plain-safe-out\n//                             c = flow-in    ns-plain-safe-in\n//                             c = block-key  ns-plain-safe-out\n//                             c = flow-key   ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - : - # )\n//                            | ( /* An ns-char preceding */ # )\n//                            | ( : /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( ? | : | - ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // - | ? | : | , | [ | ] | { | }\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | # | & | * | ! | | | = | > | ' | \"\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | % | @ | `)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//     No ending newline => unaffected; already using strip \"-\" chomping.\n//     Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth  40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | -\n      // [39] ns-uri-char     ::=  % ns-hex-digit ns-hex-digit | ns-word-char | #\n      //                         | ; | / | ? | : | @ | & | = | + | $ | ,\n      //                         | _ | . | ! | ~ | * | ' | ( | ) | [ | ]\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport default jsYaml;\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n","import decodeComponent from 'decode-uri-component';\nimport splitOnFirst from 'split-on-first';\nimport {includeKeys} from 'filter-obj';\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\n// eslint-disable-next-line unicorn/prefer-code-point\nconst strictUriEncode = string => encodeURIComponent(string).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result, [encode(key, options), '[', index, ']'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), '[]'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[]=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), ':list='].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), ':list=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator'\n\t\t\t\t? '[]='\n\t\t\t\t: '=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tencode(key, options),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(:list)$/.exec(key);\n\t\t\t\tkey = key.replace(/:list$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : (value === null ? value : decode(value, options));\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null\n\t\t\t\t\t? []\n\t\t\t\t\t: value.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], ...arrayValue];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...[accumulator[key]].flat(), value];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nexport function extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nexport function parse(query, options) {\n\toptions = {\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false,\n\t\t...options,\n\t};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst returnValue = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn returnValue;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn returnValue;\n\t}\n\n\tfor (const parameter of query.split('&')) {\n\t\tif (parameter === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst parameter_ = options.decode ? parameter.replace(/\\+/g, ' ') : parameter;\n\n\t\tlet [key, value] = splitOnFirst(parameter_, '=');\n\n\t\tif (key === undefined) {\n\t\t\tkey = parameter_;\n\t\t}\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : (['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options));\n\t\tformatter(decode(key, options), value, returnValue);\n\t}\n\n\tfor (const [key, value] of Object.entries(returnValue)) {\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const [key2, value2] of Object.entries(value)) {\n\t\t\t\tvalue[key2] = parseValue(value2, options);\n\t\t\t}\n\t\t} else {\n\t\t\treturnValue[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn returnValue;\n\t}\n\n\t// TODO: Remove the use of `reduce`.\n\t// eslint-disable-next-line unicorn/no-array-reduce\n\treturn (options.sort === true ? Object.keys(returnValue).sort() : Object.keys(returnValue).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = returnValue[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexport function stringify(object, options) {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = {encode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',', ...options};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key]))\n\t\t|| (options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const [key, value] of Object.entries(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = value;\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n}\n\nexport function parseUrl(url, options) {\n\toptions = {\n\t\tdecode: true,\n\t\t...options,\n\t};\n\n\tlet [url_, hash] = splitOnFirst(url, '#');\n\n\tif (url_ === undefined) {\n\t\turl_ = url;\n\t}\n\n\treturn {\n\t\turl: url_?.split('?')?.[0] ?? '',\n\t\tquery: parse(extract(url), options),\n\t\t...(options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}),\n\t};\n}\n\nexport function stringifyUrl(object, options) {\n\toptions = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true,\n\t\t...options,\n\t};\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = extract(object.url);\n\n\tconst query = {\n\t\t...parse(queryFromUrl, {sort: false}),\n\t\t...object.query,\n\t};\n\n\tlet queryString = stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\tconst urlObjectForFragmentEncode = new URL(url);\n\t\turlObjectForFragmentEncode.hash = object.fragmentIdentifier;\n\t\thash = options[encodeFragmentIdentifier] ? urlObjectForFragmentEncode.hash : `#${object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n}\n\nexport function pick(input, filter, options) {\n\toptions = {\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false,\n\t\t...options,\n\t};\n\n\tconst {url, query, fragmentIdentifier} = parseUrl(input, options);\n\n\treturn stringifyUrl({\n\t\turl,\n\t\tquery: includeKeys(query, filter),\n\t\tfragmentIdentifier,\n\t}, options);\n}\n\nexport function exclude(input, filter, options) {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn pick(input, exclusionFilter, options);\n}\n","import * as queryString from './base.js';\n\nexport default queryString;\n","export default function splitOnFirst(string, separator) {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (string === '' || separator === '') {\n\t\treturn [];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import { load as loadYaml } from 'js-yaml';\nimport queryString from 'query-string';\n\nimport { GuiGameWindow, GuiGameWindowDefinition } from './gui/guiGame';\nimport { LocalizationDictionary } from './i18n/localization';\nimport { GameEngine, GameConfig, GameActionProxy } from './gameEngine';\nimport { SimpleGameTextEngine } from './gui/textEngine';\nimport { downloadAndParse } from './utils/network';\nimport { SetBuilder } from './utils/collection';\n\ninterface DebugConfig {\n    dumpTranslationKeys?: boolean;\n}\n\ninterface AppConfig extends GameConfig {\n    guiDefinitionUrl?: string;\n    languageFileUrl?: string;\n    debugConfig?: DebugConfig;\n}\n\nclass App {\n\n    private _config: AppConfig;\n    private _container: HTMLElement;\n    private _localizer: LocalizationDictionary;\n    private _gameEngine: GameEngine;\n    private _actionProxy: GameActionProxy;\n    private _gui?: GuiGameWindow;\n    private _started: boolean = false;\n\n    constructor(container: HTMLElement, config: AppConfig) {\n        this._config = config;\n        this._container = container;\n        this._actionProxy = new GameActionProxy();\n        this._gameEngine = new GameEngine(config, this._actionProxy);\n        this._localizer = new LocalizationDictionary();\n    }\n\n    async start(): Promise<void> {\n        if (this._started) {\n            throw new Error('App already started!');\n        }\n        // The language file needs to be loaded first before rendering the game\n        // GUI.\n        if (this._config.languageFileUrl) {\n            await this._localizer.loadFrom(this._config.languageFileUrl);\n        } else {\n            console.warn('Missing language file!');\n        }\n        const textEngine = new SimpleGameTextEngine(this._localizer,\n                                                    this._gameEngine.gameState);\n        if (!this._config.guiDefinitionUrl) {\n            throw new Error('Missing GUI config file!');\n        }\n        let guiDef = await <GuiGameWindowDefinition>downloadAndParse(\n            this._config.guiDefinitionUrl, loadYaml);\n        let gui = new GuiGameWindow(this._container, textEngine,\n                                    this._gameEngine, guiDef);\n        this._actionProxy.attachGui(gui);       \n        await this._gameEngine.start(false);\n        // Debugging info for translation keys\n        if (this._config.debugConfig) {\n           this._dumpDebugInfo(this._config.debugConfig);\n        }\n        // Start game loop\n        const gameLoop = () => {\n            setTimeout(() => this._gameEngine.tick().then(gameLoop), 50);\n        };\n        gameLoop();\n        this._started = true;\n    }\n\n    private _dumpDebugInfo(debugConfig: DebugConfig): void {\n        if (debugConfig.dumpTranslationKeys) {\n            const allEvents = this._gameEngine.eventEngine.getEvents();\n            const builder = new SetBuilder<string>();\n            for (let event of allEvents) {\n                builder.add(event.collectTranslationKeys());\n            }\n            this._gameEngine.itemRegistry.forEach((item) => {\n                this._localizer.addRequiredKey(item.unlocalizedName);\n                this._localizer.addRequiredKey(item.unlocalizedDescription);\n            });\n            this._gameEngine.statusRegistry.forEach((status) => {\n                this._localizer.addRequiredKey(status.unlocalizedName);\n                this._localizer.addRequiredKey(status.unlocalizedDescription);\n            })\n            builder.get().forEach((key) => this._localizer.addRequiredKey(key));\n            const requiredKeys = this._localizer.dumpRequiredTranslationKeys();\n            console.log(`# Required translation keys (${requiredKeys.length}):\\n${requiredKeys.join('\\n')}`);\n            const missingKeys = this._localizer.dumpMissingTranslationKeys();\n            console.log(`# Missing translation keys (${missingKeys.length}):\\n${missingKeys.join('\\n')}`);\n            const unnecessaryKeys = this._localizer.dumpUnnecessaryTranslationKeys();\n            console.log(`# Unnecessary translation keys (${unnecessaryKeys.length}):\\n${unnecessaryKeys.join('\\n')}`);\n        }\n    }\n}\n\nlet appConfig: AppConfig = {};\nlet appConfigJson = document.getElementById('app_config')?.textContent;\nif (appConfigJson) {\n    appConfig = {...JSON.parse(appConfigJson)};\n}\nlet parsedHash = queryString.parse(window.location.hash || '');\nlet seed = parsedHash['init_seed'];\nif (typeof seed === 'string') {\n    appConfig['initialRandomSeed'] = seed;\n}\n\nconst app = new App(document.body, appConfig);\napp.start().then(() => {\n    console.log('App started successfully.');\n});\n"],"names":["alea","xor128","xorwow","xorshift7","xor4096","tychei","sr","module","exports","global","define","Alea","seed","me","this","mash","n","data","String","i","length","h","charCodeAt","Mash","next","t","s0","c","s1","s2","copy","f","impl","opts","xg","state","prng","int32","double","quick","XorGen","strseed","b","d","a","Math","floor","k","result","x","y","z","w","v","X","j","limit","max","init","slice","Date","push","pool","math","nodecrypto","width","startdenom","pow","significance","overflow","mask","seedrandom","options","callback","key","shortseed","mixkey","flatten","entropy","tostring","out","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","e","browser","navigator","plugins","screen","autoseed","arc4","ARC4","g","S","pass","is_math_call","keylen","s","count","r","obj","depth","prop","typ","smear","stringseed","fromCharCode","apply","random","ex","self","loadEffectCollectionFromJSON","Error","relative","amount","EffectProviderRegistry","_registry","Map","add","item","existingItem","get","id","undefined","set","has","forEach","values","EffectProviderCollectionChangedEvent","constructor","clear","oldCount","newCount","EffectProviderCollection","registry","_items","maxStackSize","Infinity","items","dispatchChangeEvent","remove","calcCombinedEffectValue","effectId","m","curItem","curEffects","getEffects","modifier","event","onChanged","Item","_id","_rarity","_icon","_effects","unlocalizedName","unlocalizedDescription","rarity","icon","ItemRegistry","loadItems","url","downloadAndParse","load","Array","isArray","itemDefs","itemDef","effects","console","log","Inventory","Status","_duration","duration","StatusRegistry","loadStatus","statusDefs","statusDef","StatusTable","_remainingTicks","super","tick","pending","EventActionFactory","conditionFactory","expressionCompiler","_deserializers","_deserializationContext","actionFactory","registerDeserializer","def","ID","fromJSONObject","deserializer","fromJSONArray","arr","actions","EALog","EventAction","_message","_dumpGameState","context","execute","gameState","dumpToConsole","tracer","traceAction","EADisplayMessage","_confirm","actionProxy","displayMessage","collectTranslationKeys","Set","EADisplayRandomMessage","_messages","msgRnd","nextRandomNumber","msgId","keys","EADisplayChoices","_choiceMessages","_requirements","_actions","choiceMessages","requirements","curActions","compile","choices","evaluator","eval","choiceId","displayChoices","builder","SetBuilder","actionList","action","EARandom","weightExprs","_weightExprs","o","weight","idx","weightedSample","map","EACoinFlip","_p","_successActions","_failActions","p","successActions","failActions","coinFlip","EASwitch","_conditions","branches","conditions","branch","cond","ECExpression","check","EALoop","_stopCondition","_maxIterations","_checkStopConditionAtEnd","stopCondition","stopConditionDef","maxIterations","checkStopConditionAtEnd","EAUpdateVariable","_varName","_updateExpr","expr","setVar","EAUpdateVariables","_varNames","_updateExprs","varNames","exprs","varName","EAUpdateVariableLimits","_limitsByVarName","limitsByVarName","limits","setVarLimits","EAGiveItem","_itemId","_amountExpr","playerInventory","EAUpdateItemAmounts","_itemIds","itemIds","updateExprs","itemId","EAEndGame","_winning","_fx","endGameState","EndGameState","Winning","Losing","EASetStatus","_statusId","_on","playerStatus","EATriggerEvents","_triggerInfoList","triggerInfoList","trigger","triggerId","priority","isNaN","triggerInfo","probability","pushPendingTrigger","EventConditionFactory","conditionId","fromJSON","objectArray","EventCondition","_expression","expression","ECNot","_condition","condition","ECAll","ECAny","ECSome","_min","_max","min","GameEvent","_trigger","_probability","_exclusions","_once","exclusions","once","GameEventEngine","expressionEngine","_eventsByTrigger","_eventInfoById","onActionExecuted","_gameState","_actionProxy","_exprEngine","_executionContext","enableAll","info","disabled","registerEvents","events","registerEvent","existingEvents","unregisterEvent","delete","index","indexOf","splice","getEvents","gameEnded","skip","occurredEvents","traceEvent","executeActions","None","EventExpressionEngine","gs","_cache","_fTable","_initFunctionTable","getVar","lb","ub","eventOccurred","upperBound","getVarLimits","lowerBound","itemCount","totalMonths","calcEffectValue","base","eItem","eStatus","hasStatus","randi","round","ceil","clip","getClosure","existsFunction","fname","source","toString","fn","compileExpression","val","GameEventLoader","ec","cf","af","_exprCompiler","_conditionFactory","_actionFactory","loadFromString","parseEvents","parseEvent","GameEngine","config","ap","_dataLoaded","_config","Object","assign","_itemRegistry","_statusRegistry","GameState","initialRandomSeed","_expressionEngine","_eventEngine","itemRegistry","statusRegistry","eventEngine","loadGameData","_initFactories","itemDefinitionUrl","warn","statusDefinitionUrl","eventLoader","eventDefinitionUrl","start","newRandomSeed","reset","hasPendingTrigger","popPendingTrigger","GameActionProxy","attachGui","gui","_guiGame","message","confirm","fx","VariableChangedEvent","oldValue","newValue","comparePendingTrigger","order","randomSeed","_occurredEvents","_pendingTriggerOrder","_variables","_varLimits","_pendingTriggers","PriorityQueue","_playerInventory","_playerStatus","_randomSeed","substring","_random","_tracer","GameTracer","variables","traceRandom","value","checkExistence","setTimeout","pendingTrigger","pop","empty","lines","limitsStr","statusId","join","top","pendingCount","onVariableChanged","GuiBase","container","textRenderer","_container","_textEngine","setHidden","hidden","style","display","removeAllChildrenOf","el","firstChild","removeChild","createAndAddChild","type","className","document","createElement","appendChild","GuiEffectProviderList","textEngine","collection","definition","_collection","_titleContainer","innerHTML","localizeAndRender","title","getLocalizationDictionary","addRequiredKey","_listContainer","renderList","onclick","target","HTMLLIElement","onItemClicked","retrieveEffectProviderFromElement","GuiItemList","_raritySpecificStyles","minRarity","maxRarity","styleClass","styleClasses","node","setAttribute","classList","localizedItemName","getAttribute","GuiStatusList","status","GuiFooter","modalBox","localizer","preamble","buttons","buttonDef","separator","textContent","button","text","href","messageTitle","confirmText","preventDefault","Particle","vx","vy","ax","ay","active","_el","element","addToScene","scene","removeFromScene","updatePosition","stepSize","left","GuiFX","confetti","colors","particles","viewPortWidth","offsetWidth","viewPortHeight","body","offsetHeight","nActive","lastTimestamp","backgroundColor","height","animate","timestamp","requestAnimationFrame","GuiGameWindow","gameEngine","_gameEngine","_statsBar","GuiStatsBar","retrieveElement","statsBar","_messageWindow","GuiMessageWindow","_modalBox","GuiModalBox","_itemList","itemList","_statusList","statusList","_footer","footer","handleVariableUpdate","playFx","getElementById","CJK_REGEXP","RegExp","_animate","_messageContainer","_choicesContainer","typewriteMessage","updateMessage","Promise","resolve","btnConfirm","choiceButtons","btn","choiceMessage","html","pText","segments","lastIdx","currentChar","test","segmentMessage","localize","curText","lastStep","startingTimestamp","elapsedTime","steps","render","pIcon","img","src","_pending","_shown","_contentBox","_confirmBtn","shift","_setContent","_clearContent","GuiStatsBarItem","exprCompiler","_conditionalStyles","_text","conditionalStyles","conditionExpression","classNames","update","ee","conditionMet","_itemsByTriggeringVariable","_expressionEvaluator","leftContainer","rightContainer","itemContainer","side","updateTrigger","SimpleGameTextEngine","_ldict","_gs","replace","match","p1","p2","specialVarName","_evalSpecialVariable","isVariableName","toFixed","parseInt","stack","TextStyleMarkupMap","curChar","markupConsumed","renderWithStyle","translate","window","location","protocol","host","pathname","encodeURIComponent","LocalizationDictionary","_dict","_requiredTranslationKeys","addTranslation","translationKey","translation","dumpMissingTranslationKeys","missingKeys","requiredKey","sort","dumpRequiredTranslationKeys","requiredKeys","dumpUnnecessaryTranslationKeys","unnecessaryKeys","loadFrom","nTranslations","_randomNumbers","_occuredEvents","_executedActions","_traces","_initSeed","initSeed","randomNumbers","occuredEvents","executedActions","json","JSON","stringify","fetch","method","headers","then","_set","_built","inputs","input","TokenType","regexGroups","tokenType","Whitespace","regex","Boolean","Name","Number","Operator","Delimiter","fp","tokens","matched","exec","tokenize","funcBody","curToken","Function","parser","reject","request","XMLHttpRequest","open","onreadystatechange","readyState","DONE","responseText","statusText","send","comparator","_data","_comparator","_heapUp","_swap","_heapDown","temp","parent","right","maxChild","cw","sum","token","singleMatcher","multiMatcher","decodeComponents","components","split","decodeURIComponent","prototype","concat","call","decode","decodeUriComponent","encodedURI","TypeError","replaceMap","entries","customDecodeURIComponent","includeKeys","object","predicate","descriptor","getOwnPropertyDescriptor","enumerable","defineProperty","Reflect","ownKeys","excludeKeys","isNothing","subject","common","isObject","toArray","sequence","repeat","string","cycle","isNegativeZero","number","NEGATIVE_INFINITY","extend","sourceKeys","formatError","exception","compact","where","reason","mark","name","line","column","snippet","YAMLException$1","captureStackTrace","create","getLine","buffer","lineStart","lineEnd","position","maxLineLength","head","tail","maxHalfLength","str","pos","padStart","maxLength","indent","linesBefore","linesAfter","re","lineStarts","lineEnds","foundLineNo","lineNoLength","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","tag","kind","construct","instanceOf","represent","representName","defaultStyle","multi","styleAliases","alias","compileStyleAliases","compileList","schema","currentType","newIndex","previousType","previousIndex","Schema$1","implicit","explicit","type$1","loadKind","compiledImplicit","compiledExplicit","compiledTypeMap","scalar","mapping","fallback","collectType","arguments","compileMap","seq","failsafe","_null","canonical","lowercase","uppercase","camelcase","bool","isOctCode","isDecCode","int","ch","hasDigits","sign","binary","octal","decimal","hexadecimal","toUpperCase","YAML_FLOAT_PATTERN","SCIENTIFIC_WITHOUT_DOT","float","toLowerCase","POSITIVE_INFINITY","NaN","parseFloat","res","core","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","year","month","day","hour","minute","second","date","fraction","delta","UTC","setTime","getTime","toISOString","merge","BASE64_MAP","code","bitlen","charAt","tailbits","bits","_hasOwnProperty$3","hasOwnProperty","_toString$2","omap","pair","pairKey","pairHasKey","objectKeys","_toString$1","pairs","_hasOwnProperty$2","_default","_hasOwnProperty$1","CONTEXT_FLOW_IN","CONTEXT_FLOW_OUT","CONTEXT_BLOCK_IN","CONTEXT_BLOCK_OUT","CHOMPING_CLIP","CHOMPING_STRIP","CHOMPING_KEEP","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","lc","simpleEscapeSequence","charFromCodepoint","simpleEscapeCheck","simpleEscapeMap","State$1","filename","onWarning","legacy","listener","implicitTypes","typeMap","lineIndent","firstTabInLine","documents","generateError","throwError","throwWarning","directiveHandlers","YAML","args","major","minor","version","checkLineBreaks","TAG","handle","prefix","tagMap","err","captureSegment","end","checkJson","_position","_length","_character","_result","mergeMappings","destination","overridableKeys","quantity","storeMappingPair","keyTag","keyNode","valueNode","startLine","startLineStart","startPos","configurable","writable","readLineBreak","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","readBlockSequence","nodeIndent","_line","_tag","_anchor","anchor","detected","anchorMap","composeNode","readTagProperty","tagHandle","tagName","isVerbatim","isNamed","readAnchorProperty","parentIndent","nodeContext","allowToSeek","allowCompact","allowBlockStyles","allowBlockScalars","allowBlockCollections","typeIndex","typeQuantity","typeList","flowIndent","blockIndent","indentStatus","atNewLine","hasContent","following","_keyLine","_keyLineStart","_keyPos","atExplicitKey","readBlockMapping","_lineStart","_pos","terminator","isPair","isExplicitPair","isMapping","readNext","readFlowCollection","captureStart","folding","tmp","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockScalar","captureEnd","readSingleQuotedScalar","hexLength","hexResult","readDoubleQuotedScalar","readAlias","withinFlowCollection","hasPendingContent","_lineIndent","_kind","readPlainScalar","readDocument","directiveName","directiveArgs","documentStart","hasDirectives","loadDocuments","nullpos","loader","loadAll","iterator","_toString","_hasOwnProperty","CHAR_BOM","CHAR_TAB","CHAR_LINE_FEED","CHAR_CARRIAGE_RETURN","CHAR_SPACE","CHAR_EXCLAMATION","CHAR_DOUBLE_QUOTE","CHAR_SHARP","CHAR_PERCENT","CHAR_AMPERSAND","CHAR_SINGLE_QUOTE","CHAR_ASTERISK","CHAR_COMMA","CHAR_MINUS","CHAR_COLON","CHAR_EQUALS","CHAR_GREATER_THAN","CHAR_QUESTION","CHAR_COMMERCIAL_AT","CHAR_LEFT_SQUARE_BRACKET","CHAR_RIGHT_SQUARE_BRACKET","CHAR_GRAVE_ACCENT","CHAR_LEFT_CURLY_BRACKET","CHAR_VERTICAL_LINE","CHAR_RIGHT_CURLY_BRACKET","ESCAPE_SEQUENCES","DEPRECATED_BOOLEANS_SYNTAX","DEPRECATED_BASE60_SYNTAX","encodeHex","character","QUOTING_TYPE_SINGLE","QUOTING_TYPE_DOUBLE","State","noArrayIndent","skipInvalid","flowLevel","styleMap","compileStyleMap","sortKeys","lineWidth","noRefs","noCompatMode","condenseFlow","quotingType","forceQuotes","replacer","explicitTypes","duplicates","usedDuplicates","indentString","spaces","ind","generateNextLine","level","isWhitespace","isPrintable","isNsCharOrWhitespace","isPlainSafe","prev","inblock","cIsNsCharOrWhitespace","cIsNsChar","codePointAt","first","needIndentIndicator","STYLE_PLAIN","STYLE_SINGLE","STYLE_LITERAL","STYLE_FOLDED","STYLE_DOUBLE","chooseScalarStyle","singleLineOnly","indentPerLevel","testAmbiguousType","char","prevChar","hasLineBreak","hasFoldableLine","shouldTrackWidth","previousLineBreak","plain","isPlainSafeLast","writeScalar","iskey","dump","testImplicitResolving","blockHeader","dropEndingNewline","moreIndented","lineRe","nextLF","lastIndex","foldLine","prevMoreIndented","foldString","escapeSeq","escapeString","indentIndicator","breakRe","curr","writeBlockSequence","writeNode","detectType","block","isblockseq","tagStr","duplicateIndex","duplicate","objectOrArray","objectKey","objectValue","explicitPair","pairBuffer","objectKeyList","writeBlockMapping","writeFlowMapping","writeFlowSequence","encodeURI","getDuplicateReferences","objects","duplicatesIndexes","inspectNode","renamed","from","to","Type","Schema","FAILSAFE_SCHEMA","JSON_SCHEMA","CORE_SCHEMA","DEFAULT_SCHEMA","YAMLException","types","null","safeLoad","safeLoadAll","safeDump","isNullOrUndefined","strictUriEncode","encodeFragmentIdentifier","Symbol","validateArrayFormatSeparator","encode","strict","keysSorter","removeHash","hashStart","parseValue","parseNumbers","trim","parseBooleans","extract","queryStart","parse","query","arrayFormat","arrayFormatSeparator","formatter","accumulator","includes","isEncodedArray","arrayValue","flat","parserForArrayFormat","returnValue","parameter","parameter_","key2","value2","reduce","shouldFilter","skipNull","skipEmptyString","keyValueSep","encoderForArrayFormat","objectCopy","filter","parseUrl","url_","hash","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryString","getHash","urlObjectForFragmentEncode","URL","pick","exclude","splitOnFirst","separatorIndex","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdD","amdO","getter","__esModule","toStringTag","nmd","paths","children","appConfig","appConfigJson","_started","_localizer","languageFileUrl","guiDefinitionUrl","guiDef","debugConfig","_dumpDebugInfo","gameLoop","dumpTranslationKeys","allEvents"],"sourceRoot":""}